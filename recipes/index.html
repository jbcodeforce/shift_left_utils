<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://jeromeboyer.net/shift_left_utils/recipes/ rel=canonical><link href=../setup/ rel=prev><link href=../command/ rel=next><link rel=icon href=../assets/batchy.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>Recipes - Shift Left Utilities v0.1.44</title><link rel=stylesheet href=../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/_mkdocstrings.css><link rel=stylesheet href=../extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#recipes-summary class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Shift Left Utilities v0.1.44" class="md-header__button md-logo" aria-label="Shift Left Utilities v0.1.44" data-md-component=logo> <img src=../assets/batchy.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Shift Left Utilities v0.1.44 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Recipes </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/shift_left_utils title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Shift Left Utilities v0.1.44" class="md-nav__button md-logo" aria-label="Shift Left Utilities v0.1.44" data-md-component=logo> <img src=../assets/batchy.png alt=logo> </a> Shift Left Utilities v0.1.44 </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/shift_left_utils title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../dev_process/ class=md-nav__link> <span class=md-ellipsis> Development Process </span> </a> </li> <li class=md-nav__item> <a href=../setup/ class=md-nav__link> <span class=md-ellipsis> Environment Setup </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Recipes </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Recipes </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tool-context class=md-nav__link> <span class=md-ellipsis> Tool context </span> </a> <nav class=md-nav aria-label="Tool context"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-engineer-centric-use-cases class=md-nav__link> <span class=md-ellipsis> Data engineer centric use cases </span> </a> </li> <li class=md-nav__item> <a href=#deployment-centric-use-cases-for-sres class=md-nav__link> <span class=md-ellipsis> Deployment centric use cases for SREs </span> </a> </li> <li class=md-nav__item> <a href=#migration-use-cases class=md-nav__link> <span class=md-ellipsis> Migration use cases </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#setup class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> <nav class=md-nav aria-label=Setup> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-configyaml-file class=md-nav__link> <span class=md-ellipsis> The config.yaml file </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#project-related-tasks class=md-nav__link> <span class=md-ellipsis> Project related tasks </span> </a> <nav class=md-nav aria-label="Project related tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-flink-project-structure class=md-nav__link> <span class=md-ellipsis> Create a Flink project structure </span> </a> </li> <li class=md-nav__item> <a href=#list-the-topics class=md-nav__link> <span class=md-ellipsis> List the topics </span> </a> </li> <li class=md-nav__item> <a href=#copy-all-the-statements-for-a-given-product-name class=md-nav__link> <span class=md-ellipsis> Copy all the statements for a given product name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#table-related-tasks class=md-nav__link> <span class=md-ellipsis> Table related tasks </span> </a> <nav class=md-nav aria-label="Table related tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-a-table-structure-to-the-flink-project class=md-nav__link> <span class=md-ellipsis> Add a table structure to the Flink project </span> </a> </li> <li class=md-nav__item> <a href=#using-makefile-for-deployment class=md-nav__link> <span class=md-ellipsis> Using Makefile for deployment </span> </a> </li> <li class=md-nav__item> <a href=#discover-the-current-source-dependencies class=md-nav__link> <span class=md-ellipsis> Discover the current source dependencies </span> </a> </li> <li class=md-nav__item> <a href=#validate-naming-convention-and-best-practices class=md-nav__link> <span class=md-ellipsis> Validate naming convention and best practices </span> </a> </li> <li class=md-nav__item> <a href=#understand-the-current-flink-statement-relationship class=md-nav__link> <span class=md-ellipsis> Understand the current Flink Statement relationship </span> </a> </li> <li class=md-nav__item> <a href=#understand-flink-statement-physical-plan class=md-nav__link> <span class=md-ellipsis> Understand Flink Statement Physical Plan </span> </a> </li> <li class=md-nav__item> <a href=#update-tables-content-recursively class=md-nav__link> <span class=md-ellipsis> Update tables content recursively </span> </a> </li> <li class=md-nav__item> <a href=#specific-task-to-update-all-makefiles class=md-nav__link> <span class=md-ellipsis> Specific task to update all Makefiles </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#build-table-inventory class=md-nav__link> <span class=md-ellipsis> Build table inventory </span> </a> </li> <li class=md-nav__item> <a href=#work-with-pipelines class=md-nav__link> <span class=md-ellipsis> Work with pipelines </span> </a> <nav class=md-nav aria-label="Work with pipelines"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#build-structured-pipeline-metadata-and-walk-through class=md-nav__link> <span class=md-ellipsis> Build structured pipeline metadata and walk through </span> </a> </li> <li class=md-nav__item> <a href=#delete-pipeline_definitionjson-files-for-a-given-folder class=md-nav__link> <span class=md-ellipsis> Delete pipeline_definition.json files for a given folder </span> </a> </li> <li class=md-nav__item> <a href=#define-pipeline-definitions-for-all-the-tables-within-a-folder-hierarchy class=md-nav__link> <span class=md-ellipsis> Define pipeline definitions for all the tables within a folder hierarchy </span> </a> </li> <li class=md-nav__item> <a href=#modify-sql-content-during-deployment class=md-nav__link> <span class=md-ellipsis> Modify SQL content during deployment </span> </a> </li> <li class=md-nav__item> <a href=#build-pipeline-static-reports class=md-nav__link> <span class=md-ellipsis> Build pipeline static reports </span> </a> </li> <li class=md-nav__item> <a href=#assess-a-flink-statement-execution-plan class=md-nav__link> <span class=md-ellipsis> Assess a Flink Statement execution plan </span> </a> </li> <li class=md-nav__item> <a href=#accessing-running-statements class=md-nav__link> <span class=md-ellipsis> Accessing running statements </span> </a> </li> <li class=md-nav__item> <a href=#pipeline-deployment class=md-nav__link> <span class=md-ellipsis> Pipeline Deployment </span> </a> </li> <li class=md-nav__item> <a href=#undeploy-pipeline class=md-nav__link> <span class=md-ellipsis> Undeploy pipeline </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting-the-cli class=md-nav__link> <span class=md-ellipsis> Troubleshooting the CLI </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../command/ class=md-nav__link> <span class=md-ellipsis> CLI References </span> </a> </li> <li class=md-nav__item> <a href=../mcp/ class=md-nav__link> <span class=md-ellipsis> MCP server </span> </a> </li> <li class=md-nav__item> <a href=../coding/test_harness/ class=md-nav__link> <span class=md-ellipsis> Test Harness </span> </a> </li> <li class=md-nav__item> <a href=../pipeline_mgr/ class=md-nav__link> <span class=md-ellipsis> Pipeline Management </span> </a> </li> <li class=md-nav__item> <a href=../blue_green_deploy/ class=md-nav__link> <span class=md-ellipsis> Blue/Green Deployment </span> </a> </li> <li class=md-nav__item> <a href=../perf_test/ class=md-nav__link> <span class=md-ellipsis> Performance Testing </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/flink-studies/coding/flink-sql/ class=md-nav__link> <span class=md-ellipsis> Flink SQL best practices </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> For Contributors </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> For Contributors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../coding/ class=md-nav__link> <span class=md-ellipsis> Code structure </span> </a> </li> <li class=md-nav__item> <a href=../coding/llm_based_translation/ class=md-nav__link> <span class=md-ellipsis> AI based migration </span> </a> </li> <li class=md-nav__item> <a href=../tracking/ class=md-nav__link> <span class=md-ellipsis> Feature Tracking </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tool-context class=md-nav__link> <span class=md-ellipsis> Tool context </span> </a> <nav class=md-nav aria-label="Tool context"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-engineer-centric-use-cases class=md-nav__link> <span class=md-ellipsis> Data engineer centric use cases </span> </a> </li> <li class=md-nav__item> <a href=#deployment-centric-use-cases-for-sres class=md-nav__link> <span class=md-ellipsis> Deployment centric use cases for SREs </span> </a> </li> <li class=md-nav__item> <a href=#migration-use-cases class=md-nav__link> <span class=md-ellipsis> Migration use cases </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#setup class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> <nav class=md-nav aria-label=Setup> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-configyaml-file class=md-nav__link> <span class=md-ellipsis> The config.yaml file </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#project-related-tasks class=md-nav__link> <span class=md-ellipsis> Project related tasks </span> </a> <nav class=md-nav aria-label="Project related tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-a-flink-project-structure class=md-nav__link> <span class=md-ellipsis> Create a Flink project structure </span> </a> </li> <li class=md-nav__item> <a href=#list-the-topics class=md-nav__link> <span class=md-ellipsis> List the topics </span> </a> </li> <li class=md-nav__item> <a href=#copy-all-the-statements-for-a-given-product-name class=md-nav__link> <span class=md-ellipsis> Copy all the statements for a given product name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#table-related-tasks class=md-nav__link> <span class=md-ellipsis> Table related tasks </span> </a> <nav class=md-nav aria-label="Table related tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#add-a-table-structure-to-the-flink-project class=md-nav__link> <span class=md-ellipsis> Add a table structure to the Flink project </span> </a> </li> <li class=md-nav__item> <a href=#using-makefile-for-deployment class=md-nav__link> <span class=md-ellipsis> Using Makefile for deployment </span> </a> </li> <li class=md-nav__item> <a href=#discover-the-current-source-dependencies class=md-nav__link> <span class=md-ellipsis> Discover the current source dependencies </span> </a> </li> <li class=md-nav__item> <a href=#validate-naming-convention-and-best-practices class=md-nav__link> <span class=md-ellipsis> Validate naming convention and best practices </span> </a> </li> <li class=md-nav__item> <a href=#understand-the-current-flink-statement-relationship class=md-nav__link> <span class=md-ellipsis> Understand the current Flink Statement relationship </span> </a> </li> <li class=md-nav__item> <a href=#understand-flink-statement-physical-plan class=md-nav__link> <span class=md-ellipsis> Understand Flink Statement Physical Plan </span> </a> </li> <li class=md-nav__item> <a href=#update-tables-content-recursively class=md-nav__link> <span class=md-ellipsis> Update tables content recursively </span> </a> </li> <li class=md-nav__item> <a href=#specific-task-to-update-all-makefiles class=md-nav__link> <span class=md-ellipsis> Specific task to update all Makefiles </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#build-table-inventory class=md-nav__link> <span class=md-ellipsis> Build table inventory </span> </a> </li> <li class=md-nav__item> <a href=#work-with-pipelines class=md-nav__link> <span class=md-ellipsis> Work with pipelines </span> </a> <nav class=md-nav aria-label="Work with pipelines"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#build-structured-pipeline-metadata-and-walk-through class=md-nav__link> <span class=md-ellipsis> Build structured pipeline metadata and walk through </span> </a> </li> <li class=md-nav__item> <a href=#delete-pipeline_definitionjson-files-for-a-given-folder class=md-nav__link> <span class=md-ellipsis> Delete pipeline_definition.json files for a given folder </span> </a> </li> <li class=md-nav__item> <a href=#define-pipeline-definitions-for-all-the-tables-within-a-folder-hierarchy class=md-nav__link> <span class=md-ellipsis> Define pipeline definitions for all the tables within a folder hierarchy </span> </a> </li> <li class=md-nav__item> <a href=#modify-sql-content-during-deployment class=md-nav__link> <span class=md-ellipsis> Modify SQL content during deployment </span> </a> </li> <li class=md-nav__item> <a href=#build-pipeline-static-reports class=md-nav__link> <span class=md-ellipsis> Build pipeline static reports </span> </a> </li> <li class=md-nav__item> <a href=#assess-a-flink-statement-execution-plan class=md-nav__link> <span class=md-ellipsis> Assess a Flink Statement execution plan </span> </a> </li> <li class=md-nav__item> <a href=#accessing-running-statements class=md-nav__link> <span class=md-ellipsis> Accessing running statements </span> </a> </li> <li class=md-nav__item> <a href=#pipeline-deployment class=md-nav__link> <span class=md-ellipsis> Pipeline Deployment </span> </a> </li> <li class=md-nav__item> <a href=#undeploy-pipeline class=md-nav__link> <span class=md-ellipsis> Undeploy pipeline </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting-the-cli class=md-nav__link> <span class=md-ellipsis> Troubleshooting the CLI </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=recipes-summary>Recipes Summary<a class=headerlink href=#recipes-summary title="Permanent link">&para;</a></h1> <details class="- info"> <summary>Version</summary> <ul> <li>Created January 2025.</li> <li>Update: 05/28/2025. </li> </ul> </details> <p>This chapter details the standard activities to manage a Confluent Cloud Flink project with the <code>shift_left</code> tool when doing a ETL to real-time migration project. The recipes address new project initiative or a migration project from an existing SQL based ETL solution.</p> <p>As introduced in the <a href=../#context>context chapter</a> the CLI groups a set of commands to manage project, tables, and Flink statements as part of pipelines.</p> <figure> <img alt src=../images/components.drawio.png> </figure> <p>The audience for the recipes chapter are the Data Engineers and the SREs.</p> <h2 id=tool-context>Tool context<a class=headerlink href=#tool-context title="Permanent link">&para;</a></h2> <p>The <code>shift_left</code> CLI may help to support different Data Engineers and SREs activities. For that, the tool will build and use a set of different components. The figures below groups what the different components are for different use cases.</p> <p>The major development activity constructs managed by the tools are:</p> <ul> <li>Flink Project, with the structure of the different folders.</li> <li>Flink Table with the structure of a <strong>table folder structure</strong>, with sql-scripts, makefile and tests.</li> <li><strong>Flink table inventory</strong> to keep an up to date inventory of table, with the references to the ddl and dml. Tables not in the inventory do not exist.</li> <li><strong>Flink Statement pipeline definition</strong>: metadata about a table and its parents and / or children. Sink tables have only parents, source tables have only children.</li> <li><strong>Flink SQL statement</strong> for DDL and DML.</li> <li>For complex DML it may make sense to have dedicated <strong>test definitions</strong>.</li> </ul> <h3 id=data-engineer-centric-use-cases>Data engineer centric use cases<a class=headerlink href=#data-engineer-centric-use-cases title="Permanent link">&para;</a></h3> <p>Developers/ Data Engineers are responsible to develop the Flink SQL statements and the validation tests. </p> <figure> <img alt src=../images/dev_comp.drawio.png> </figure> <p>The table folder structure, table inventory and pipeline_definitions are generated and managed by tools. No human edit is needed and even discouraged.</p> <p>See the following <strong>recipes</strong> to support the management of those elements:</p> <p><a class=md-button href=#create-a-flink-project-structure><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3zm0 4h14v-2H3zm0 4h14v-2H3zm16 0h2v-2h-2zm0-10v2h2V7zm0 6h2v-2h-2z"/></svg></span> Create a Flink project</a> <a class=md-button href=#add-a-table-structure-to-the-flink-project><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 4h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m0 4v4h6V8zm8 0v4h6V8zm-8 6v4h6v-4zm8 0v4h6v-4z"/></svg></span> Add table folder structure</a></p> <p><a class=md-button href=#validate-naming-convention-and-best-practices><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 9a2 2 0 0 1-2-2 2 2 0 0 1 2-2c1.11 0 2 .89 2 2a2 2 0 0 1-2 2m0 5a2 2 0 0 1-2-2 2 2 0 0 1 2-2c1.11 0 2 .89 2 2a2 2 0 0 1-2 2m0 5a2 2 0 0 1-2-2 2 2 0 0 1 2-2c1.11 0 2 .89 2 2a2 2 0 0 1-2 2m8-9h-3V8.86c1.72-.45 3-2 3-3.86h-3V4a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v1H4c0 1.86 1.28 3.41 3 3.86V10H4c0 1.86 1.28 3.41 3 3.86V15H4c0 1.86 1.28 3.41 3 3.86V20a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1.14c1.72-.45 3-2 3-3.86h-3v-1.14c1.72-.45 3-2 3-3.86"/></svg></span> Validate development best practices</a> <a class=md-button href=../coding/test_harness/#unit-test-usage-and-recipes><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 2a2 2 0 0 0-2 2v8h2V8h2v4h2V4a2 2 0 0 0-2-2zm0 2h2v2H4m18 9.5V14a2 2 0 0 0-2-2h-4v10h4a2 2 0 0 0 2-2v-1.5a1.54 1.54 0 0 0-1.5-1.5 1.54 1.54 0 0 0 1.5-1.5M20 20h-2v-2h2zm0-4h-2v-2h2M5.79 21.61l-1.58-1.22 14-18 1.58 1.22Z"/></svg></span> Use the Test harness</a> <a class=md-button href=#understand-flink-statement-physical-plan><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12.9 4.22C18.73 6.84 20 2 20 2s-1.11 6.07-6.21 8.55c-1.04.51-1.69.78-1.69.78L3.73 7.25l8.37-3.43s-.2-.06.8.4M11.12 22l-7.79-4.22V9.07l7.79 3.97zm1.76 0 7.8-4.22V9.07l-7.8 3.97z"/></svg></span> Understanding Flink semantic</a></p> <p><a class=md-button href=#accessing-running-statements>Validate running statements</a></p> <p><a class=md-button href=#understand-the-current-flink-statement-relationship>Understand Flink statement dependencies</a> <a class=md-button href=#assess-a-flink-statement-execution-plan>Verify execution plan for each table, product or folder</a> <a class=md-button href=#pipeline-deployment>Deploy a pipeline</a></p> <h3 id=deployment-centric-use-cases-for-sres>Deployment centric use cases for SREs<a class=headerlink href=#deployment-centric-use-cases-for-sres title="Permanent link">&para;</a></h3> <p>For pipeline deployment, there are very important elements that keep the deployment consistent, most of them are described above, but the execution plan is interesting tool to assess, once a pipeline is defined, how it can be deployed depending if SREs deploy from the source, the sink or an intermediate. (See <a href=../pipeline_mgr/ >pipeline managmeent section</a>)</p> <figure> <img alt src=../images/deployment_comp.drawio.png> </figure> <p>The involved recipes are:</p> <p><a class=md-button href=#build-table-inventory><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"/></svg></span> Build Table inventory</a> <a class=md-button href=#build-structured-pipeline-metadata-and-walk-through><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9 2v6h2v3H5c-1.11 0-2 .89-2 2v3H1v6h6v-6H5v-3h6v3H9v6h6v-6h-2v-3h6v3h-2v6h6v-6h-2v-3c0-1.11-.89-2-2-2h-6V8h2V2z"/></svg></span> Build dependency metadata</a> <a class=md-button href=#understand-the-current-flink-statement-relationship>Understand Flink statement dependencies</a></p> <p><a class=md-button href=#assess-a-flink-statement-execution-plan>Review the current execution plan from a Flink statement</a> <a class=md-button href=#pipeline-deployment>Deploy a Flink Statement taking into consideration its execution plan</a></p> <h3 id=migration-use-cases>Migration use cases<a class=headerlink href=#migration-use-cases title="Permanent link">&para;</a></h3> <p>This use case applies only when the source project is available and based on dbt, Spark SQL or ksqlDB. The approach is to use the <code>shift_left table migrate</code> command to use an agentic workflow, using LLM models to do the translation, syntax validation, and improvement using different AI agents.</p> <p><img alt src=../images/migration_comp.drawio.png></p> <ul> <li>See the <a href=../coding/llm_based_translation/ >Migrate existing SQL to Flink SQL using AI chapter</a> for details.</li> </ul> <h2 id=setup>Setup<a class=headerlink href=#setup title="Permanent link">&para;</a></h2> <p>To use the CLI, be sure to follow the <a href=../setup/ >setup instructions.</a></p> <h3 id=the-configyaml-file>The config.yaml file<a class=headerlink href=#the-configyaml-file title="Permanent link">&para;</a></h3> <p>The <code>config.yaml</code> file is crucial to set up and is used by the tool via the CONFIG_FILE environment variable. <a href=../setup/#environment-variables>See instructions</a>. This file should be setup per Confluent Cloud environment. The <code>shift_left</code> tool run simple validation of this config_file during the starting phase.</p> <details class="- example"> <summary>Practices</summary> <p>Define one config.yaml per environment (dev, stage, prod) and save them in the <code>$HOME/.shift_left</code> folder.</p> </details> <h2 id=project-related-tasks>Project related tasks<a class=headerlink href=#project-related-tasks title="Permanent link">&para;</a></h2> <h3 id=create-a-flink-project-structure>Create a Flink project structure<a class=headerlink href=#create-a-flink-project-structure title="Permanent link">&para;</a></h3> <p>This activity is done when starting a new Flink project. The lead developer will jump start a project by running this command to create folder and git init.</p> <ul> <li>Get help for the <a href=../command/#project>shift_left project management</a> CLI</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>shift_left<span class=w> </span>project<span class=w> </span>--help
</span></code></pre></div> <ul> <li>To create a new project:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>shift_left<span class=w> </span>project<span class=w> </span>init<span class=w> </span>&lt;project_name&gt;<span class=w> </span>&lt;project_path&gt;<span class=w> </span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=c1># example for a default Kimball project</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>shift_left<span class=w> </span>project<span class=w> </span>init<span class=w> </span>flink-project<span class=w> </span>../
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=c1># For a project more focused on developing data as a product</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>shift_left<span class=w> </span>project<span class=w> </span>init<span class=w> </span>flink-project<span class=w> </span>../<span class=w> </span>--project-type<span class=w> </span>data-product
</span></code></pre></div> <details class="- info"> <summary>Output</summary> <div class=codehilite><pre><span></span><code>```sh
my-flink-project
├── config.yaml
├── docs
├── logs
├── pipelines
│   ├── common.mk
│   └── data_product_1
│       ├── dimensions
│       ├── facts
│       │   └── fct_order
│       │       ├── Makefile
│       │       ├── sql-scripts
│       │       │   ├── ddl.fct_order.sql
│       │       │   └── dml.fct_order.sql
│       │       ├── tests
│       │       └── tracking.md
│       ├── intermediates
│       └── sources
└── staging
```
</code></pre></div> </details> <h3 id=list-the-topics>List the topics<a class=headerlink href=#list-the-topics title="Permanent link">&para;</a></h3> <p>Build a txt file with the list of topic for the Kafka Cluster defined in the config.yaml. </p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>shift_left<span class=w> </span>project<span class=w> </span>list-topics<span class=w> </span><span class=nv>$PIPELINES</span>
</span></code></pre></div> <p>Each topic has a json object to describe its metadata.</p> <details class="- example"> <summary>topic metadata</summary> <div class="language-json highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=w>   </span><span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=err>&#39;ki</span><span class=kc>n</span><span class=err>d&#39;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;Ka</span><span class=kc>f</span><span class=err>kaTopic&#39;</span><span class=p>,</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=err>&#39;me</span><span class=kc>ta</span><span class=err>da</span><span class=kc>ta</span><span class=err>&#39;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>        </span><span class=err>&#39;sel</span><span class=kc>f</span><span class=err>&#39;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;h</span><span class=kc>tt</span><span class=err>ps</span><span class=p>:</span><span class=c1>//p....confluent.cloud/kafka/v3/clusters/lkc-..../topics/....audit-trail&#39;,</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>        </span><span class=err>&#39;resource_</span><span class=kc>na</span><span class=err>me&#39;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;cr</span><span class=kc>n</span><span class=p>:</span><span class=c1>///kafka=lkc-..../topic=....audit-trail....&#39;</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>    </span><span class=err>&#39;clus</span><span class=kc>ter</span><span class=err>_id&#39;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;lkc</span><span class=mf>-.....</span><span class=err>&#39;</span><span class=p>,</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>    </span><span class=err>&#39;</span><span class=kc>t</span><span class=err>opic_</span><span class=kc>na</span><span class=err>me&#39;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;....audi</span><span class=kc>t</span><span class=mi>-</span><span class=kc>tra</span><span class=err>il&#39;</span><span class=p>,</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=w>    </span><span class=err>&#39;is_i</span><span class=kc>nternal</span><span class=err>&#39;</span><span class=p>:</span><span class=w> </span><span class=err>False</span><span class=p>,</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>    </span><span class=err>&#39;replica</span><span class=kc>t</span><span class=err>io</span><span class=kc>n</span><span class=err>_</span><span class=kc>fa</span><span class=err>c</span><span class=kc>t</span><span class=err>or&#39;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>    </span><span class=err>&#39;par</span><span class=kc>t</span><span class=err>i</span><span class=kc>t</span><span class=err>io</span><span class=kc>ns</span><span class=err>_cou</span><span class=kc>nt</span><span class=err>&#39;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=w>    </span><span class=err>&#39;par</span><span class=kc>t</span><span class=err>i</span><span class=kc>t</span><span class=err>io</span><span class=kc>ns</span><span class=err>&#39;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=err>&#39;rela</span><span class=kc>te</span><span class=err>d&#39;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;h</span><span class=kc>tt</span><span class=err>ps</span><span class=p>:</span><span class=c1>//.../partitions&#39;},</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=w>    </span><span class=err>&#39;co</span><span class=kc>nf</span><span class=err>igs&#39;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=err>&#39;rela</span><span class=kc>te</span><span class=err>d&#39;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;h</span><span class=kc>tt</span><span class=err>ps</span><span class=p>:</span><span class=c1>//...../configs&#39;},</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=w>    </span><span class=err>&#39;par</span><span class=kc>t</span><span class=err>i</span><span class=kc>t</span><span class=err>io</span><span class=kc>n</span><span class=err>_reassig</span><span class=kc>n</span><span class=err>me</span><span class=kc>nts</span><span class=err>&#39;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=err>&#39;rela</span><span class=kc>te</span><span class=err>d&#39;</span><span class=p>:</span><span class=w> </span><span class=err>&#39;h</span><span class=kc>tt</span><span class=err>ps</span><span class=p>:</span><span class=c1>//..../partitions/-/reassignment&#39;},</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=w>    </span><span class=err>&#39;au</span><span class=kc>t</span><span class=err>horized_opera</span><span class=kc>t</span><span class=err>io</span><span class=kc>ns</span><span class=err>&#39;</span><span class=p>:</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=p>}</span>
</span></code></pre></div> </details> <h3 id=copy-all-the-statements-for-a-given-product-name>Copy all the statements for a given product name<a class=headerlink href=#copy-all-the-statements-for-a-given-product-name title="Permanent link">&para;</a></h3> <p>The goal is to extract all the Flink statements for a given product with their cross-product parents. </p> <ul> <li> <p>First be sure $PIPELINES is from the source git repository folder</p> </li> <li> <p>Run the command that will copy all the table part of the product (c360 is the product name), fro, $PIPELINES to a target folder: <div class="language-sh highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>shift_left<span class=w> </span>project<span class=w> </span>isolate-data-product<span class=w> </span>c360<span class=w> </span><span class=nv>$PIPELINES</span><span class=w> </span>~/Code/data/c360-only
</span></code></pre></div></p> </li> <li> <p>Change the PIPELINES environment variables, build table inventory and metadata: <div class="language-sh highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nb>export</span><span class=w> </span><span class=nv>PIPELINES</span><span class=o>=</span>/Users/jerome/Documents/Code/customers/mc/aqem-only/pipelines
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>shift_left<span class=w> </span>table<span class=w> </span>build-inventory
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-all-metadata
</span></code></pre></div></p> </li> <li> <p>Assess a build execution plan, after configuring the config.yaml, to verify the coherence of the statement relationships: <div class="language-sh highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-execution-plan<span class=w> </span>--product-name<span class=w> </span>c360
</span></code></pre></div></p> </li> </ul> <h2 id=table-related-tasks>Table related tasks<a class=headerlink href=#table-related-tasks title="Permanent link">&para;</a></h2> <p>On a day to day basis Data Engineer may need to add a table and the SQL statements to create and insert records to the new table. The table has to land in one of the hierarchy: <strong>facts, dimensions, views, intermediates, sources</strong>.</p> <h3 id=add-a-table-structure-to-the-flink-project>Add a table structure to the Flink project<a class=headerlink href=#add-a-table-structure-to-the-flink-project title="Permanent link">&para;</a></h3> <ul> <li>Get help for the <code>shift_left</code> table management CLI</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>shift_left<span class=w> </span>table<span class=w> </span>--help
</span></code></pre></div> <ul> <li>Create a new table folder structure to start writing SQL statements using basic templates: (see the <a href=../command/#table-init>command description</a>). There are two mandatory arguments: the table name and the folder to write the new table structure to. Be sure to following table name naming convention.</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>shift_left<span class=w> </span>table<span class=w> </span>init<span class=w> </span>fct_user<span class=w> </span><span class=nv>$PIPELINES</span>/facts<span class=w> </span>--product-name<span class=w> </span>p3
</span></code></pre></div> <details class="- example"> <summary>Output example</summary> <div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>facts
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>    └── p3
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>        └── fct_user
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>            ├── Makefile
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>            ├── sql-scripts
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>            │   ├── ddl.p3_fct_user.sql
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>            │   └── dml.p3_fct_user.sql
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>            ├── tests
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>            └── tracking.md
</span></code></pre></div> </details> <ul> <li>Another example for an intermediate table:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>shift_left<span class=w> </span>table<span class=w> </span>init<span class=w> </span>int_p3_users<span class=w> </span><span class=nv>$PIPELINES</span>/intermediates<span class=w> </span>--product-name<span class=w> </span>p3
</span></code></pre></div> <details class="- example"> <summary>Output example</summary> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>intermediates
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>    └── p3
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>        └── int_p3_users
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>            ├── Makefile
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>            ├── sql-scripts
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>            │   ├── ddl.int_p3_users.sql
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>            │   └── dml.int_p3_users.sql
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>            ├── tests
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>            └── tracking.md
</span></code></pre></div> </details> <p><a href=#a-table-name-naming-convention>See also the table naming convention section.</a></p> <h3 id=using-makefile-for-deployment>Using Makefile for deployment<a class=headerlink href=#using-makefile-for-deployment title="Permanent link">&para;</a></h3> <p>During the development of the DDL and DML it may be more efficient to use the confluent CLI to deploy the Flink statements. To make the things easier a Makefile exists in each table folder to support the deployment during development. Each Confluent Cloud cli commands are defined in a common makefile that is used by any Makefile within a 'table' folder. As an example the fact table <code>fct_order</code> has a Makefile at the same level of the sql-scripts.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>──<span class=w> </span>fct_order
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span>├──<span class=w> </span>Makefile
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span>├──<span class=w> </span>sql-scripts
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>    </span>│<span class=w>   </span>├──<span class=w> </span>ddl.p1_fct_order.sql
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>    </span>│<span class=w>   </span>└──<span class=w> </span>dml.p1_fct_order.sql
</span></code></pre></div> <p>The Makefile import the <code>common.mk</code></p> <details class="- warning"> <summary>Change the relative path</summary> <p>It may be needed to change the relative path to the common.mk file when the number of sub folders from the $PIPELINES is greater or less that 3 levels from the current folder.</p> </details> <ul> <li>To setup, <a href=https://learn.microsoft.com/en-us/windows/wsl/install>install make on Windows</a>, or for MacOS: <code>brew install make</code></li> <li>Be sure to be on a confluent cli above 4.24. To upgrade: <code>confluent update</code></li> <li>Be sure when starting a new session to have login to Confluent cloud and set the good endpoint:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>make<span class=w> </span>init
</span></code></pre></div> <ul> <li>To create one Flink dynamic table using the target Flink compute pool do:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>make<span class=w> </span>create_flink_ddl
</span></code></pre></div> <p>This action creates the Kafka topic with the name of the table and creates the schema definitions for the key and the value in the Schema Registry of the Confluent Cloud environment. A DDL execution will terminate and the Flink job statement is set to be Completed. The Make tsarget also ask for deleting the DDL Flink statement as we need to keep a unique name for the Flink statement. As a Flink-developer role, you need to be able to delete Flink Statement.</p> <details class="- info"> <summary>How it works</summary> <p>Each makefile is reusing targets defined in a common.mk file that is under the $PIPELINES folder. This file uses environment variables so each Developer can have their own compute pool, and work in different environment. <a href=../setup/#environment-variables>See setup env variables section</a>. See the top of the common.mk file for the usage of those environment variables <a href=https://github.com/jbcodeforce/shift_left_utils/blob/main/src/shift_left/src/shift_left/core/templates/common.mk>the template is here</a>. </p> </details> <ul> <li>Verify the completion of the job using cli:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>make<span class=w> </span>describe_flink_ddl
</span></code></pre></div> <ul> <li>For DML deplouyment use: (This job will run forever until stopped or deleted)</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>make<span class=w> </span>create_flink_dml
</span></code></pre></div> <ul> <li>Verify the running job using cli:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>make<span class=w> </span>describe_flink_dml
</span></code></pre></div> <ul> <li>Sometime, developer may need to delete the created topics and schemas, for that the makefile target is:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>make<span class=w> </span>drop_table_&lt;table_name&gt;
</span></code></pre></div> <ul> <li>Each Flink Statement is named, so it may be relevant to delete a created statement with the command:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>make<span class=w> </span>delete_flink_statements
</span></code></pre></div> <h3 id=discover-the-current-source-dependencies>Discover the current source dependencies<a class=headerlink href=#discover-the-current-source-dependencies title="Permanent link">&para;</a></h3> <p>When doing a migration project it may be interesting to understand the current SQL statement relationship with the tables it uses.</p> <p>It is assumed the source project, is constructed with the Kimball approach. Existing Data Platforms have such capabilities, but we found interesting to get a simple tool that goes within the source SQL content file and build a dependencies graph. The current SQL parser is good to parse dbt SQL file, as Flink SQL.</p> <p>Starting with a single fact table, the following command will identify the dependency hierarchy and include elements to track the migration project:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>shift_left<span class=w> </span>table<span class=w> </span>search-source-dependencies<span class=w> </span><span class=nv>$SRC_FOLDER</span>/facts/fact_education_document.sql<span class=w> </span><span class=nv>$SRC_FOLDER</span>
</span></code></pre></div> <ul> <li>The output may look like in the followring report:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>--<span class=w> </span>Process<span class=w> </span>file:<span class=w> </span><span class=nv>$SRC_FOLDER</span>/facts/fact_education_document.sql
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>Table:<span class=w> </span>fact_education_document<span class=w> </span><span class=k>in</span><span class=w> </span>the<span class=w> </span>SQL<span class=w> </span>../facts/fact_education_document.sql<span class=w>  </span>depends<span class=w> </span>on:
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>  </span>-<span class=w> </span>int_education_completed<span class=w>  </span><span class=k>in</span><span class=w> </span>SQL<span class=w> </span>../intermediates/int_education_completed.sql
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>  </span>-<span class=w> </span>int_non_abandond_training<span class=w>  </span><span class=k>in</span><span class=w> </span>SQL<span class=w> </span>../intermediates/int_non_abandond_training.sql
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>  </span>-<span class=w> </span>int_unassigned_curriculum<span class=w>  </span><span class=k>in</span><span class=w> </span>SQL<span class=w> </span>../intermediates/int_unassigned_curriculum.sql
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>  </span>-<span class=w> </span>int_courses<span class=w>   </span><span class=k>in</span><span class=w> </span>SQL<span class=w> </span>../intermediates/int_courses.sql
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>  </span>-<span class=w> </span>int_docs_wo_training_data<span class=w>  </span><span class=k>in</span><span class=w> </span>SQL<span class=w> </span>../intermediates/docs/int_docs_wo_training_data.sql
</span></code></pre></div> <h3 id=validate-naming-convention-and-best-practices>Validate naming convention and best practices<a class=headerlink href=#validate-naming-convention-and-best-practices title="Permanent link">&para;</a></h3> <p>It is possible to assess a set of basic rules against all files in the $PIPELINES folder</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>shift_left<span class=w> </span>table<span class=w> </span>validate-table-names<span class=w> </span><span class=nv>$PIPELINES</span>
</span></code></pre></div> <p>Some standard reported violations:</p> <table> <thead> <tr> <th>Error message</th> <th>Action</th> <th>Comments</th> </tr> </thead> <tbody> <tr> <td>CREATE TABLE statement</td> <td>CREATE TABLE IF NOT EXISTS statement</td> <td>Missing 'IF NOT EXISTS'</td> </tr> <tr> <td>WRONG FILE NAME</td> <td><code>&lt;ddl|dml&gt;.&lt;int|src&gt;_&lt;product&gt;_&lt;table_name&gt;.sql</code></td> <td>Refer DDL,DML file naming <a href=#ddl-and-dml-file-naming-convention>standards</a></td> </tr> <tr> <td>WRONG TABLE NAME</td> <td><code>&lt;src|int&gt;_&lt;product&gt;_&lt;table_name&gt;</code></td> <td>Refer Table naming <a href=#a-table-name-naming-convention>standards</a></td> </tr> <tr> <td>WRONG <code>changelog.mode</code></td> <td><code>changelog.mode</code> should be <code>upsert</code> for source, intermediate. <code>retract</code> for sink</td> <td>None</td> </tr> <tr> <td>WRONG <code>kafka.cleanup-policy</code></td> <td><code>kafka.cleanup-policy</code> should be <code>delete</code> for source, intermediate. <code>compact</code> for sink</td> <td>Note <code>delete</code> is default</td> </tr> <tr> <td><code>key.avro-registry.schema-context</code> NOT FOUND</td> <td><code>.flink-dev</code> or <code>.flink-stage</code></td> <td>Needed for 2 clusters 1 Schema Registry setup ... dev &amp; stage</td> </tr> <tr> <td><code>value.avro-registry.schema-context</code> NOT FOUND</td> <td><code>.flink-dev</code> or <code>.flink-stage</code></td> <td>Needed for 2 clusters 1 Schema Registry setup ... dev &amp; stage</td> </tr> <tr> <td>MISSING pipeline definition</td> <td>pipeline_definition.json is missing</td> <td>Refer to GIT repo directory structure <a href=#create-a-flink-project-structure>standards</a></td> </tr> <tr> <td>INVALID pipeline ddl_ref</td> <td><code>ddl_ref</code> path in <code>pipeline_definition.json</code> doesnt exist</td> <td>Run the <code>shift_left</code> utils tool to resolve</td> </tr> <tr> <td>INVALID pipeline dml_ref</td> <td><code>dml_ref</code> path in <code>pipeline_definition.json</code> doesnt exist</td> <td>Run the <code>shift_left</code> utils tool to resolve</td> </tr> <tr> <td>INVALID pipeline table_name</td> <td><code>table_name</code> in <code>pipeline_definition.json</code> is invalid</td> <td>Due to a bug in the past the tool may write <code>No-Table</code>. Investigate and resolve</td> </tr> </tbody> </table> <h4 id=a-table-name-naming-convention>A table name naming convention<a class=headerlink href=#a-table-name-naming-convention title="Permanent link">&para;</a></h4> <p>The folder name may be used as a table name in a lot of commands. The following naming convention is defined:</p> <ul> <li><strong>Sources:</strong> Template: <code>src_&lt;product&gt;_&lt;table_name&gt;</code> Examples: <code>src_p1_records, src_p2_users</code> </li> <li><strong>Intermediates:</strong> Template: <code>int_&lt;product&gt;_&lt;table_name&gt;</code> Examples: <code>int_p1_action, int_p2_inventory_event</code></li> <li><strong>Facts or dimensions:</strong> Template: <code>&lt;product&gt;_&lt;fct|dim&gt;&lt;table_name&gt;</code> Examples: <code>p1_dim_user_role, p2_fct_event_link</code></li> <li><strong>Materialized Views:</strong> Template: <code>&lt;product&gt;_mv_&lt;table_name&gt;</code> Examples: <code>p2_mv_cancel_event, p2_mv_config_users</code></li> </ul> <h4 id=ddl-and-dml-file-naming-convention>DDL and DML File naming convention<a class=headerlink href=#ddl-and-dml-file-naming-convention title="Permanent link">&para;</a></h4> <ul> <li> <p><strong>Sources:</strong></p> <ul> <li>Template: <code>&lt;ddl|dml&gt;.src_&lt;product&gt;_&lt;table_name&gt;.sql</code></li> <li>Examples: <code>dml.src_p1_table_1.sql</code></li> </ul> </li> <li> <p><strong>Intermediates:</strong></p> <ul> <li>Template: <code>&lt;ddl|dml&gt;.int_&lt;product&gt;_&lt;table_name&gt;.sql</code></li> <li>Examples: <code>dml.p1_int_table_1.sql</code></li> </ul> </li> <li> <p><strong>Facts, Dimensions &amp; Views:</strong></p> <ul> <li>Template: <code>&lt;ddl|dml&gt;.&lt;product&gt;_&lt;fct|dim|mv&gt;_&lt;table_name&gt;.sql</code></li> <li>Examples: <code>ddl.p1_fct_table_1.sql, dml.p1_fct_table_1.sql, ddl.p1_mv_table_1.sql</code></li> </ul> </li> </ul> <h3 id=understand-the-current-flink-statement-relationship>Understand the current Flink Statement relationship<a class=headerlink href=#understand-the-current-flink-statement-relationship title="Permanent link">&para;</a></h3> <p>When the DML is created with the FROM, JOINS,... it is possible to use the tool to get the hierarchy of parents and build the pipeline_definition.json file for a table. It is strongly recommended to use sink tables, like <code>dimensions, facts or views</code> dml statements.</p> <ol> <li> <p>It is important that table inventory is up to date. See <a href=#build-table-inventory>this section</a></p> </li> <li> <p>Run the command to update the current pipeline definition metadata and update the parents ones, recursively.</p> </li> </ol> <div class="language-sh highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-metadata<span class=w> </span><span class=nv>$PIPELINES</span>/dimensions/p1/dim_event/sql-scripts/dml.p1_dim_event.sql
</span></code></pre></div> <p>This will build the <code>pipeline_definition.json</code>.</p> <details class="- example"> <summary>a simple metadata file</summary> <div class="language-json highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=p>{</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;fct_order&quot;</span><span class=p>,</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;fact&quot;</span><span class=p>,</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=nt>&quot;dml_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order/sql-scripts/dml.fct_order.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=nt>&quot;ddl_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order/sql-scripts/ddl.fct_order.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order&quot;</span><span class=p>,</span>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=nt>&quot;state_form&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Stateful&quot;</span><span class=p>,</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=nt>&quot;parents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=w>        </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;int_table_2&quot;</span><span class=p>,</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;intermediate&quot;</span><span class=p>,</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=w>        </span><span class=nt>&quot;dml_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/intermediates/p1/int_table_2/sql-scripts/dml.int_table_2.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a><span class=w>        </span><span class=nt>&quot;ddl_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/intermediates/p1/int_table_2/sql-scripts/ddl.int_table_2.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a><span class=w>        </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/intermediates/p1/int_table_2&quot;</span><span class=p>,</span>
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a><span class=w>        </span><span class=nt>&quot;state_form&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Stateful&quot;</span><span class=p>,</span>
</span><span id=__span-25-16><a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a><span class=w>        </span><span class=nt>&quot;parents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-25-17><a id=__codelineno-25-17 name=__codelineno-25-17 href=#__codelineno-25-17></a><span class=w>        </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-25-18><a id=__codelineno-25-18 name=__codelineno-25-18 href=#__codelineno-25-18></a><span class=w>            </span><span class=p>{</span>
</span><span id=__span-25-19><a id=__codelineno-25-19 name=__codelineno-25-19 href=#__codelineno-25-19></a><span class=w>            </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;fct_order&quot;</span><span class=p>,</span>
</span><span id=__span-25-20><a id=__codelineno-25-20 name=__codelineno-25-20 href=#__codelineno-25-20></a><span class=w>            </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;fact&quot;</span><span class=p>,</span>
</span><span id=__span-25-21><a id=__codelineno-25-21 name=__codelineno-25-21 href=#__codelineno-25-21></a><span class=w>            </span><span class=nt>&quot;dml_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order/sql-scripts/dml.fct_order.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-22><a id=__codelineno-25-22 name=__codelineno-25-22 href=#__codelineno-25-22></a><span class=w>            </span><span class=nt>&quot;ddl_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order/sql-scripts/ddl.fct_order.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-23><a id=__codelineno-25-23 name=__codelineno-25-23 href=#__codelineno-25-23></a><span class=w>            </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order&quot;</span><span class=p>,</span>
</span><span id=__span-25-24><a id=__codelineno-25-24 name=__codelineno-25-24 href=#__codelineno-25-24></a><span class=w>            </span><span class=nt>&quot;state_form&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Stateful&quot;</span><span class=p>,</span>
</span><span id=__span-25-25><a id=__codelineno-25-25 name=__codelineno-25-25 href=#__codelineno-25-25></a><span class=w>            </span><span class=nt>&quot;parents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-25-26><a id=__codelineno-25-26 name=__codelineno-25-26 href=#__codelineno-25-26></a><span class=w>            </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-25-27><a id=__codelineno-25-27 name=__codelineno-25-27 href=#__codelineno-25-27></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-25-28><a id=__codelineno-25-28 name=__codelineno-25-28 href=#__codelineno-25-28></a><span class=w>        </span><span class=p>]</span>
</span><span id=__span-25-29><a id=__codelineno-25-29 name=__codelineno-25-29 href=#__codelineno-25-29></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-25-30><a id=__codelineno-25-30 name=__codelineno-25-30 href=#__codelineno-25-30></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-25-31><a id=__codelineno-25-31 name=__codelineno-25-31 href=#__codelineno-25-31></a><span class=w>        </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;int_table_1&quot;</span><span class=p>,</span>
</span><span id=__span-25-32><a id=__codelineno-25-32 name=__codelineno-25-32 href=#__codelineno-25-32></a><span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;intermediate&quot;</span><span class=p>,</span>
</span><span id=__span-25-33><a id=__codelineno-25-33 name=__codelineno-25-33 href=#__codelineno-25-33></a><span class=w>        </span><span class=nt>&quot;dml_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/intermediates/p1/int_table_1/sql-scripts/dml.int_table_1.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-34><a id=__codelineno-25-34 name=__codelineno-25-34 href=#__codelineno-25-34></a><span class=w>        </span><span class=nt>&quot;ddl_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/intermediates/p1/int_table_1/sql-scripts/ddl.int_table_1.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-35><a id=__codelineno-25-35 name=__codelineno-25-35 href=#__codelineno-25-35></a><span class=w>        </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/intermediates/p1/int_table_1&quot;</span><span class=p>,</span>
</span><span id=__span-25-36><a id=__codelineno-25-36 name=__codelineno-25-36 href=#__codelineno-25-36></a><span class=w>        </span><span class=nt>&quot;state_form&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Stateful&quot;</span><span class=p>,</span>
</span><span id=__span-25-37><a id=__codelineno-25-37 name=__codelineno-25-37 href=#__codelineno-25-37></a><span class=w>        </span><span class=nt>&quot;parents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-25-38><a id=__codelineno-25-38 name=__codelineno-25-38 href=#__codelineno-25-38></a><span class=w>        </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-25-39><a id=__codelineno-25-39 name=__codelineno-25-39 href=#__codelineno-25-39></a><span class=w>            </span><span class=p>{</span>
</span><span id=__span-25-40><a id=__codelineno-25-40 name=__codelineno-25-40 href=#__codelineno-25-40></a><span class=w>            </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;fct_order&quot;</span><span class=p>,</span>
</span><span id=__span-25-41><a id=__codelineno-25-41 name=__codelineno-25-41 href=#__codelineno-25-41></a><span class=w>            </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;fact&quot;</span><span class=p>,</span>
</span><span id=__span-25-42><a id=__codelineno-25-42 name=__codelineno-25-42 href=#__codelineno-25-42></a><span class=w>            </span><span class=nt>&quot;dml_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order/sql-scripts/dml.fct_order.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-43><a id=__codelineno-25-43 name=__codelineno-25-43 href=#__codelineno-25-43></a><span class=w>            </span><span class=nt>&quot;ddl_ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order/sql-scripts/ddl.fct_order.sql&quot;</span><span class=p>,</span>
</span><span id=__span-25-44><a id=__codelineno-25-44 name=__codelineno-25-44 href=#__codelineno-25-44></a><span class=w>            </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/facts/p1/fct_order&quot;</span><span class=p>,</span>
</span><span id=__span-25-45><a id=__codelineno-25-45 name=__codelineno-25-45 href=#__codelineno-25-45></a><span class=w>            </span><span class=nt>&quot;state_form&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Stateful&quot;</span><span class=p>,</span>
</span><span id=__span-25-46><a id=__codelineno-25-46 name=__codelineno-25-46 href=#__codelineno-25-46></a><span class=w>            </span><span class=nt>&quot;parents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-25-47><a id=__codelineno-25-47 name=__codelineno-25-47 href=#__codelineno-25-47></a><span class=w>            </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-25-48><a id=__codelineno-25-48 name=__codelineno-25-48 href=#__codelineno-25-48></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-25-49><a id=__codelineno-25-49 name=__codelineno-25-49 href=#__codelineno-25-49></a><span class=w>        </span><span class=p>]</span>
</span><span id=__span-25-50><a id=__codelineno-25-50 name=__codelineno-25-50 href=#__codelineno-25-50></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-25-51><a id=__codelineno-25-51 name=__codelineno-25-51 href=#__codelineno-25-51></a><span class=p>],</span>
</span><span id=__span-25-52><a id=__codelineno-25-52 name=__codelineno-25-52 href=#__codelineno-25-52></a><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-25-53><a id=__codelineno-25-53 name=__codelineno-25-53 href=#__codelineno-25-53></a><span class=p>}</span>
</span></code></pre></div> </details> <h3 id=understand-flink-statement-physical-plan>Understand Flink Statement Physical Plan<a class=headerlink href=#understand-flink-statement-physical-plan title="Permanent link">&para;</a></h3> <p>The <a href=https://docs.confluent.io/cloud/current/flink/reference/statements/explain.html#understanding-the-output>Flink statement physical plan</a> shows how Flink executes your query and it is available via the console wit the "EXPLAIN" keyword. When a project includes a lot of Flink statements it makes sense to automate the discovery of potential issues, as part of a quality assurance process. Shift left tools propose two reports: 1/ at the table level, as a Data engineer will get from the console, and 2/ at the data product level to get a full assessment of all the Flink statements classified within a product.</p> <ul> <li> <p>Execute <code>explain</code> on one table, using a specific compute pool id, and persist the report under the $HOME/.shift_left folder. If the compute-pool-id is not specified it will use the default one in the config.yaml: <div class="language-sh highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>shift_left<span class=w> </span>table<span class=w> </span>explain<span class=w> </span>--table-name<span class=w> </span>&lt;tablename&gt;<span class=w> </span>--compute-pool-id<span class=w> </span>&lt;compute-pool-id&gt;
</span></code></pre></div></p> </li> <li> <p>Execute for all the tables within a product, forcing keeping the reports for each table. <div class="language-sh highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>shift_left<span class=w> </span>table<span class=w> </span>explain<span class=w> </span>--product-name<span class=w> </span>&lt;productname&gt;<span class=w> </span>--compute-pool-id<span class=w> </span>&lt;compute-pool-id&gt;<span class=w> </span>--persist-report
</span></code></pre></div></p> </li> </ul> <h3 id=update-tables-content-recursively>Update tables content recursively<a class=headerlink href=#update-tables-content-recursively title="Permanent link">&para;</a></h3> <p>There are some cases when we need to apply a set of updates to a lot of Flink Statement files in one run. The update can be coded into a python file which includes classes that implement an interface. The following updates are already supported.</p> <table> <thead> <tr> <th>Update name</th> <th>Type of changes</th> <th>Class name</th> </tr> </thead> <tbody> <tr> <td>CompressionType</td> <td>Add the <code>'kafka.producer.compression.type' = 'snappy'</code> in the WITH section of the DDL</td> <td><code>shift_left.core.utils.table_worker.Change_CompressionType</code></td> </tr> <tr> <td>ChangeModeToUpsert</td> <td>Set the <code>'changelog.mode' = 'upsert'</code> configuration</td> <td><code>shift_left.core.utils.table_worker.ChangeChangeModeToUpsert</code></td> </tr> <tr> <td>ChangePK_FK_to_SID</td> <td>apply replace("_pk_fk", "_sid") to dml</td> <td><code>shift_left.core.utils.table_worker.ChangePK_FK_to_SID</code></td> </tr> <tr> <td>Concat_to_Concat_WS</td> <td>change the type of concat to use</td> <td><code>shift_left.core.utils.table_worker.Change_Concat_to_Concat_WS</code></td> </tr> <tr> <td>ReplaceEnvInSqlContent</td> <td>Replace the name of the raw topic with the environement prefix</td> <td><code>shift_left.core.utils.table_worker.ReplaceEnvInSqlContent</code></td> </tr> </tbody> </table> <p>Example of a command to modify all the DDL files in the $PIPELINES folder hierarchy:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>shift_left<span class=w> </span>table<span class=w> </span>update-tables<span class=w> </span><span class=nv>$PIPELINES</span><span class=w>  </span>--ddl<span class=w> </span>--class-to-use<span class=w> </span>shift_left.core.utils.table_worker.Change_CompressionType
</span></code></pre></div> <details class="- info"> <summary>Extending the TableWorker</summary> <p>The class is in shift_left.core.utils.table_worker.py module. Each new class needs to extend the TabeWorker interface</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=k>class</span><span class=w> </span><span class=nc>TableWorker</span><span class=p>():</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=sd>Worker to update the content of a sql content, applying some specific logic</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=k>def</span><span class=w> </span><span class=nf>update_sql_content</span><span class=p>(</span><span class=n>sql_content</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>bool</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a>    <span class=k>return</span> <span class=p>(</span><span class=kc>False</span><span class=p>,</span> <span class=n>sql_content</span><span class=p>)</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=k>class</span><span class=w> </span><span class=nc>YourOwnUpdate</span><span class=p>(</span><span class=n>TableWorker</span><span class=p>):</span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a> <span class=k>def</span><span class=w> </span><span class=nf>update_sql_content</span><span class=p>(</span><span class=n>sql_content</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>bool</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a>    <span class=c1># your code here</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a>    <span class=k>return</span> <span class=n>updated</span><span class=p>,</span> <span class=n>new_content</span>
</span></code></pre></div> </details> <h3 id=specific-task-to-update-all-makefiles>Specific task to update all Makefiles<a class=headerlink href=#specific-task-to-update-all-makefiles title="Permanent link">&para;</a></h3> <p>During the life of a project it may be relevant to add specific Make target, change naming convention,... therefore there is a need to be able to change all the Makefile within a <code>pipelines</code> folder. The command is simple and will take the updated template as source and apply specific tuning per table folder:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a>shift_left<span class=w> </span>table<span class=w> </span>update-all-makefiles<span class=w> </span><span class=nv>$PIPELINES</span>
</span></code></pre></div> <p>As of now the template is in the source folder: <code>shift_left_utils/src/shift_left/src/shift_left/core/templates/makefile_ddl_dml_tmpl.jinja</code>.</p> <h2 id=build-table-inventory>Build table inventory<a class=headerlink href=#build-table-inventory title="Permanent link">&para;</a></h2> <p>The inventory is built by crowling the Flink project <code>pipelines</code> folder and by looking at each dml to get the table name. The inventory is a hashmap with the key being the table name and the value is a <code>FlinkTableReference</code> defined as:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=k>class</span><span class=w> </span><span class=nc>FlinkTableReference</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>    <span class=n>table_name</span><span class=p>:</span> <span class=n>Final</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> 
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>    <span class=n>ddl_ref</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>    <span class=n>dml_ref</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>    <span class=n>table_folder_name</span><span class=p>:</span> <span class=nb>str</span>
</span></code></pre></div> <ul> <li>To build an inventory file do the following command:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>shift_left<span class=w> </span>table<span class=w> </span>build-inventory<span class=w> </span><span class=nv>$PIPELINES</span>
</span></code></pre></div> <details class="- example"> <summary>Example of inventory created</summary> <div class=codehilite><pre><span></span><code>```json
&quot;src_table_2&quot;: {
    &quot;table_name&quot;: &quot;src_table_2&quot;,
    &quot;dml_ref&quot;: &quot;../examples/flink_project/pipelines/sources/p1/src_table_2/sql-scripts/dml.src_table_2.sql&quot;,
    &quot;table_folder_name&quot;: &quot;../examples/flink_project/pipelines/sources/p1/src_table_2&quot;
},
&quot;src_table_3&quot;: {
    &quot;table_name&quot;: &quot;src_table_3&quot;,
    &quot;dml_ref&quot;: &quot;../examples/flink_project/pipelines/sources/p1/src_table_3/sql-scripts/dml.src_table_3.sql&quot;,
    &quot;table_folder_name&quot;: &quot;../examples/flink_project/pipelines/sources/p1/src_table_3&quot;
},
&quot;src_table_1&quot;: {
    &quot;table_name&quot;: &quot;src_table_1&quot;,
    &quot;dml_ref&quot;: &quot;../examples/flink_project/pipelines/sources/src_table_1/sql-scripts/dml.src_table_1.sql&quot;,
    &quot;table_folder_name&quot;: &quot;../examples/flink_project/pipelines/sources/src_table_1&quot;
},
&quot;int_table_2&quot;: {
    &quot;table_name&quot;: &quot;int_table_2&quot;,
    &quot;dml_ref&quot;: &quot;../examples/flink_project/pipelines/intermediates/p1/int_table_2/sql-scripts/dml.int_table_2.sql&quot;,
    &quot;table_folder_name&quot;: &quot;../examples/flink_project/pipelines/intermediates/p1/int_table_2&quot;
},
&quot;int_table_1&quot;: {
    &quot;table_name&quot;: &quot;int_table_1&quot;,
    &quot;dml_ref&quot;: &quot;../examples/flink_project/pipelines/intermediates/p1/int_table_1/sql-scripts/dml.int_table_1.sql&quot;,
    &quot;table_folder_name&quot;: &quot;../examples/flink_project/pipelines/intermediates/p1/int_table_1&quot;
},
&quot;fct_order&quot;: {
    &quot;table_name&quot;: &quot;fct_order&quot;,
    &quot;dml_ref&quot;: &quot;../examples/flink_project/pipelines/facts/p1/fct_order/sql-scripts/dml.fct_order.sql&quot;,
    &quot;table_folder_name&quot;: &quot;../examples/flink_project/pipelines/facts/p1/fct_order&quot;
}
```
</code></pre></div> </details> <p>The <code>inventory.json</code> file is saved under the $PIPELINES folder and it is used intensively by the <code>shift_left</code> cli.</p> <details class="- warning"> <summary>Update the inventory</summary> <p>Each time a new table is added or renamed, it is recommended to run this command. It can even be integrated in a CI pipeline.</p> </details> <h2 id=work-with-pipelines>Work with pipelines<a class=headerlink href=#work-with-pipelines title="Permanent link">&para;</a></h2> <p>The table inventory, as created in previous recipe, is important to get the pipeline metadata created. The approach is to define metadata for each table to keep relevant information for the DDL and DML files, the parents and children relationships. The recursive information is limited to 2 levels to avoid infinite loops.</p> <p>A source table will not have parent, while a sink table will not have children. Intermediate tables have both.</p> <p>For deeper analysis of the challenges of deploying Flink statements, we recommend reading <a href=https://docs.confluent.io/cloud/current/flink/concepts/schema-statement-evolution.html#query-evolution>Confluent Cloud Flink product documentation - Query evolution chapter</a> and the <a href=../pipeline_mgr/ >pipeline manager chapter.</a></p> <h3 id=build-structured-pipeline-metadata-and-walk-through>Build structured pipeline metadata and walk through<a class=headerlink href=#build-structured-pipeline-metadata-and-walk-through title="Permanent link">&para;</a></h3> <p>A pipeline is discovered by walking from the sink to the sources via intermediate statements. Each pipeline is a list of existing dimension and fact tables, and for each table the tool creates the <code>pipeline_definition.json</code>.</p> <p>The project folder structure for a table looks like in the following convention:</p> <p><code>&lt;facts | intermediates | dimensions | sources&gt;/&lt;product_name&gt;/&lt;table_name&gt;</code></p> <p>The <code>pipeline_definition.json</code> is persisted under the <code>&lt;table_name&gt;</code> folder. </p> <p>The tool needs to get an up-to-date inventory, see <a href=#build-table-inventory>previous section to build it</a>.</p> <ul> <li>Build all the <code>pipeline_definition.json</code> from a given sink by specifying the <strong>DML</strong> file path:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-metadata<span class=w> </span><span class=nv>$PIPELINES</span>/facts/p1/fct_order/sql-scripts/dml.fct_order.sql
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=c1># you can add a folder, as CLI argument, to get the path to the inventory. By default it uses the environment variable.</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-metadata<span class=w> </span><span class=nv>$PIPELINES</span>/facts/p1/fct_order/sql-scripts/dml.fct_order.sql<span class=w> </span><span class=nv>$PIPELINES</span>
</span></code></pre></div> <p>The tool goes over the SQL content and gets table names from the JOIN, and the FROM predicates. It will remove any CTE and any extracted string that are not table names. The regular expression may have some misses, so the tool searches within the table inventory, anyway.</p> <p>The following figure illustrates what will happen for each parent of the referenced table. The first figure illustrates existing Flink statement hierarchy, which means, existing tables have a pipeline_definition.json file in their repective folder, created from previous run. </p> <figure> <img alt src=../images/build_pipeline_def_1.drawio.png> </figure> <p>As a developer add the sink table <strong>E</strong>, the tool is re-executed so that the <strong>E</strong> and <strong>C</strong> pipeline definitions are newly created, while the <strong>Z</strong>, which already exists, has its pipeline_definition children list updated, by adding the child <strong>C</strong>.</p> <figure> <img alt src=../images/build_pipeline_def_2.drawio.png> </figure> <p>The tool will keep existing files and merge content.</p> <details class="- example"> <summary>The different pipeline_definition.json impacted</summary> <p>The sink table <strong>E</strong> will have a new metadata file:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=p>{</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;E&quot;</span><span class=p>,</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;fact&quot;</span><span class=p>,</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=nt>&quot;parents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=w>        </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;C&quot;</span><span class=p>,</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;intermediate&quot;</span><span class=p>,</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=w>        </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/intermediates/p1/C&quot;</span><span class=p>,</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=p>}</span>
</span></code></pre></div> <p>Table <strong>C</strong> will also have a new one:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=p>{</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;C&quot;</span><span class=p>,</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;intermediate&quot;</span><span class=p>,</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=nt>&quot;parents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=w>        </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Z&quot;</span><span class=p>,</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=w>        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;intermediate&quot;</span><span class=p>,</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=w>        </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pipelines/intermediates/p/Z&quot;</span><span class=p>,</span>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=w>    </span><span class=p>}],</span>
</span><span id=__span-36-10><a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;E&quot;</span><span class=p>,</span><span class=w> </span><span class=err>...</span><span class=p>}</span><span class=w> </span><span class=p>]</span>
</span><span id=__span-36-11><a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a><span class=p>}</span>
</span></code></pre></div> <p>While <strong>Z</strong> get a new child:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=p>{</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Z&quot;</span><span class=p>,</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;intermediate&quot;</span><span class=p>,</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=nt>&quot;parents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span><span class=w> </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;X&quot;</span><span class=p>,</span><span class=w> </span><span class=err>...</span><span class=p>},</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=w>        </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Y&quot;</span><span class=p>,</span><span class=w> </span><span class=err>...</span><span class=p>},</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=w>    </span><span class=p>],</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;D&quot;</span><span class=p>,</span><span class=w> </span><span class=err>...</span><span class=p>},</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=w>                </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;P&quot;</span><span class=p>,</span><span class=w> </span><span class=err>...</span><span class=p>},</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=w>                 </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;table_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;C&quot;</span><span class=p>,</span><span class=w> </span><span class=err>...</span><span class=p>}</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=w>            </span><span class=p>]</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=p>}</span>
</span></code></pre></div> </details> <h3 id=delete-pipeline_definitionjson-files-for-a-given-folder>Delete pipeline_definition.json files for a given folder<a class=headerlink href=#delete-pipeline_definitionjson-files-for-a-given-folder title="Permanent link">&para;</a></h3> <p>Delete all the <code>pipeline_definition.json</code> files from a given folder. The command walk down the folder tree to find table folder.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>delete-all-metadata<span class=w> </span><span class=nv>$PIPELINES</span>
</span></code></pre></div> <p>Only the facts tables:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>delete-all-metadata<span class=w> </span><span class=nv>$PIPELINES</span>/facts
</span></code></pre></div> <h3 id=define-pipeline-definitions-for-all-the-tables-within-a-folder-hierarchy>Define pipeline definitions for all the tables within a folder hierarchy<a class=headerlink href=#define-pipeline-definitions-for-all-the-tables-within-a-folder-hierarchy title="Permanent link">&para;</a></h3> <p>It may be relevant to update all the metadata definitions within a given folder. Start by deleting all and then recreate:</p> <ul> <li>For facts or dimensions</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>delete-all-metadata<span class=w> </span><span class=nv>$PIPELINES</span>/facts
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=c1>#</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-all-metadata<span class=w> </span><span class=nv>$PIPELINES</span>/facts
</span></code></pre></div> <ul> <li>For all pipelines</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>delete-all-metadata<span class=w> </span><span class=nv>$PIPELINES</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=c1>#</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-all-metadata<span class=w> </span><span class=nv>$PIPELINES</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=c1># same as env variable will be used</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-all-metadata
</span></code></pre></div> <h3 id=modify-sql-content-during-deployment>Modify SQL content during deployment<a class=headerlink href=#modify-sql-content-during-deployment title="Permanent link">&para;</a></h3> <p>Sometime there are requirements to adapt the content of the SQL statement during deployment into different environments. By environment we mean Kafka cluster, Confluent Cloud environment and schema registry. The shift_left tool defines a contract via the TableWorker class with an <code>update_sql_content</code> function to implement:</p> <div class="language-python highlight"><span class=filename>core.utils.table_worker.py</span><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=k>class</span><span class=w> </span><span class=nc>TableWorker</span><span class=p>():</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>    <span class=k>def</span><span class=w> </span><span class=nf>update_sql_content</span><span class=p>(</span><span class=n>sql_content</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>string_to_change_from</span><span class=p>:</span> <span class=nb>str</span><span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>string_to_change_to</span><span class=p>:</span> <span class=nb>str</span><span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>bool</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=sd>        Args:</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=sd>            sql_content (str): The original SQL statement to transform</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=sd>            column_to_search (Optional[str], optional): Column name to search for in tenant filtering.</span>
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=sd>                Required for dev environment tenant filtering. Defaults to None.</span>
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=sd>            product_name (Optional[str], optional): Product identifier for environment-specific logic.</span>
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a><span class=sd>                Used in dev environment filtering and topic naming. Defaults to None.</span>
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a>
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=sd>        Returns:</span>
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=sd>            Tuple[bool, str]: A tuple containing:</span>
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a><span class=sd>                - bool: True if the SQL content was modified, False otherwise</span>
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=sd>                - str: The transformed SQL content</span>
</span><span id=__span-42-15><a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-42-16><a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a>        <span class=k>return</span> <span class=p>(</span><span class=kc>False</span><span class=p>,</span> <span class=n>sql_content</span><span class=p>)</span>
</span></code></pre></div> <p>When Data engineers or SREs need to develop specific transformations, they can create an extension class and modify the config.yaml. Here are the steps:</p> <ol> <li>Clone the shift_left git repository</li> <li>Under the src/shift_left/src/shift_left folder, create an extension folder (same level as core and cli_commands folder): <div class="language-sh highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a>└──<span class=w> </span>shift_left
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>├──<span class=w> </span>dist
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a>├──<span class=w> </span>src
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a>│<span class=w>   </span>└──<span class=w> </span>shift_left
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a>│<span class=w>       </span>├──<span class=w> </span>cli.py
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a>│<span class=w>       </span>├──<span class=w> </span>cli_commands
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a>│<span class=w>       </span>├──<span class=w> </span>core
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a>│<span class=w>       </span>│<span class=w>   </span>└──<span class=w> </span>utils
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a>│<span class=w>       </span>│<span class=w>       </span>├──<span class=w> </span>table_worker.py
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a>│<span class=w>       </span>└──<span class=w> </span>extensions
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a>│<span class=w>           </span>├──<span class=w> </span>sql_content_processing.py
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a>│<span class=w>           </span>└──<span class=w> </span>test_sql_content_processing.py
</span></code></pre></div></li> <li>Add your class in a python code and a unit test module. The class needs to extends the TableWorker <div class="language-python highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=k>class</span><span class=w> </span><span class=nc>ModifySqlContentForDifferentEnv</span><span class=p>(</span><span class=n>TableWorker</span><span class=p>):</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>        <span class=k>pass</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a>    <span class=k>def</span><span class=w> </span><span class=nf>update_sql_content</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sql_content</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>column_to_search</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>product_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>bool</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a>        <span class=c1># implement logic here</span>
</span></code></pre></div></li> <li> <p>Change the config.yaml to reference your class: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=nt>app</span><span class=p>:</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=w>    </span><span class=nt>sql_content_modifier</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">shift_left.extensions.sql_content_processing.ModifySqlContentForDifferentEnv</span>
</span></code></pre></div></p> </li> <li> <p>Build the shift_left cli, change the version in the <code>pyproject.toml</code> file: <div class="language-sh highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a>uv<span class=w> </span>build<span class=w> </span>.
</span></code></pre></div></p> </li> </ol> <p>This build process can be automated via a git action workflow.</p> <h3 id=build-pipeline-static-reports>Build pipeline static reports<a class=headerlink href=#build-pipeline-static-reports title="Permanent link">&para;</a></h3> <p>A static report is built by looking at the SQL content of the DML Flink statement and build list of parents of each table. The build-all-metadata may update t he meta-data file children part as other table consumes current table. As an example if <code>Table A</code> has zero children, but 6 parents the first version of its <code>pipeline_definition.json</code> will include only its 6 parents. When building <code>Table B</code> dependencies, as it uses <code>Table A</code>, then the <code>Table A</code> children will have the Table B as child:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class="p p-Indicator">{</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=w>   </span><span class=s>&quot;table_name&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;table_a&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=w>   </span><span class=s>&quot;product_name&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;p1&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=w>   </span><span class=nv>....</span>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=w>    </span><span class=nv>&quot;children&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class="p p-Indicator">[</span>
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=w>            </span><span class="p p-Indicator">{</span>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a><span class=w>               </span><span class=s>&quot;table_name&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;table_b&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a><span class=w>               </span><span class=s>&quot;product_name&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;p1&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=w>               </span><span class=s>&quot;type&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;intermediate&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=w>               </span><span class=s>&quot;dml_ref&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;pipelines/intermediates/p1/table_b/sql-scripts/dml.int_p1_table_b.sql&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a><span class=w>               </span><span class=s>&quot;ddl_ref&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;pipelines/intermediates/p1/table_b/sql-scripts/ddl.int_p1_table_b.sql&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-12><a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a><span class=w>               </span><span class=s>&quot;path&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;pipelines/intermediates/aqem/table_b&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-13><a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a><span class=w>               </span><span class=s>&quot;state_form&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;Stateful&quot;</span><span class="p p-Indicator">,</span>
</span><span id=__span-47-14><a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a><span class=w>               </span><span class=s>&quot;parents&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class="p p-Indicator">[],</span>
</span><span id=__span-47-15><a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a><span class=w>               </span><span class=s>&quot;children&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class="p p-Indicator">[]</span>
</span><span id=__span-47-16><a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a><span class=w>            </span><span class="p p-Indicator">}</span>
</span><span id=__span-47-17><a id=__codelineno-47-17 name=__codelineno-47-17 href=#__codelineno-47-17></a><span class=w>         </span><span class="p p-Indicator">]</span>
</span></code></pre></div> <p>To avoid having too much data the parents and children lists of those added child are empty.</p> <p>Once those metadata files are created a lot of things can be done, and specially understand the static relationship between statements.</p> <ul> <li>Get a report from one sink table to n sources: </li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report<span class=w> </span>fct_table
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=c1># explicitly specifying the pipeline folder. (this is to demonstrate that it can run in STAGING folder too)</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report<span class=w> </span>fct_table<span class=w> </span><span class=nv>$PIPELINES</span>
</span></code></pre></div> <ul> <li>Get a report from one source to n sinks:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report<span class=w> </span>src_table
</span></code></pre></div> <p>The same approach works for intermediate tables. The tool supports different output:</p> <ul> <li>A very minimalist graph view</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report<span class=w> </span>fct_table<span class=w> </span>--graph
</span></code></pre></div> <ul> <li>json extract</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report<span class=w> </span>fct_table<span class=w> </span>--json
</span></code></pre></div> <ul> <li>yaml</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report<span class=w> </span>fct_table<span class=w> </span>--yaml
</span></code></pre></div> <h3 id=assess-a-flink-statement-execution-plan>Assess a Flink Statement execution plan<a class=headerlink href=#assess-a-flink-statement-execution-plan title="Permanent link">&para;</a></h3> <p>The execution plan is a topological sorted Flink statement hierarchy enriched with current state of the running DMLs, with a plan to start non running parents, and update or restart the children depending of the upgrade mode: stateless or stateful.</p> <ul> <li> <p>Here is a basic command for an intermediate table: <div class="language-sh highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-execution-plan<span class=w> </span>--table-name<span class=w> </span>int_table_2<span class=w> </span>
</span></code></pre></div></p> </li> <li> <p>The options that are relevant to control the execution plan: <div class="language-sh highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a>--compute-pool-id<span class=w> </span>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>--may-start-descendants
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a>--force-ancestors
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>--cross-product-deployment
</span></code></pre></div></p> </li> <li> <p>This command will take into account the following parameters in the config.yaml: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class="l l-Scalar l-Scalar-Plain">flink.flink_url</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class="l l-Scalar l-Scalar-Plain">flink.api_key</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class="l l-Scalar l-Scalar-Plain">flink.api_secret</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class="l l-Scalar l-Scalar-Plain">flink.compute_pool_id</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a><span class="l l-Scalar l-Scalar-Plain">flink.catalog_name</span>
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a><span class="l l-Scalar l-Scalar-Plain">flink.database_name</span>
</span></code></pre></div></p> </li> <li> <p>The execution plan can be extended to a product, so a user may see all the dependencies for a given product: <div class="language-sh highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-execution-plan<span class=w> </span>--product-name<span class=w> </span>p2
</span></code></pre></div></p> </li> <li> <p>It may be interesting to get the execution plan for a given layer, like all the facts or intermediates, so the granulatity is at the directory level, so it can be intermediate, facts... or even combination of level/product like: <div class="language-sh highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>build-execution-plan<span class=w> </span>--dir<span class=w> </span><span class=nv>$PIPELINES</span>/intermediates/p2
</span></code></pre></div></p> </li> </ul> <details class="- example"> <summary>The outcome of an execution plan</summary> <p>The information reported is taking into account the table hierarchy and the state of the Statement currently running:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a>To deploy fct_order the following statements need to be executed in the order
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>
</span><span id=__span-58-3><a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a>--- Parents impacted ---
</span></code></pre></div> </details> <details class=info open=open> <summary>For any help of pipeline commands</summary> <div class="language-sh highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>--help
</span></code></pre></div> </details> <h3 id=accessing-running-statements>Accessing running statements<a class=headerlink href=#accessing-running-statements title="Permanent link">&para;</a></h3> <p>The execution plan helps to get valuable information and reports can be built from there:</p> <ul> <li>Get the current Flink statement running in the environment specified in the config.yaml under: <code>confluent_cloud.environment_id</code> for a given table</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=c1># Get help</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report-running-statements<span class=w>  </span>--help
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a><span class=c1># Running Flink Statements</span>
</span><span id=__span-60-4><a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report-running-statements<span class=w> </span>--table-name<span class=w> </span>fct_order
</span></code></pre></div> <p>The list will include all the ancestors of the current table with the statement name, comput pool id and statement running status.</p> <ul> <li>The report can be used to get all the statements for a given product. This will generate two files under the $HOME/.shift_left folder: csv and json files.</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report-running-statements<span class=w> </span>--product-name<span class=w> </span>p1
</span></code></pre></div> <ul> <li>Finally the report can be run from the content of a folder, which basically addresses the use case to look at intermediates or facts for a given product or cross products:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>report-running-statements<span class=w> </span>--dir<span class=w> </span><span class=nv>$PIPELINES</span>/facts/p1
</span></code></pre></div> <h3 id=pipeline-deployment>Pipeline Deployment<a class=headerlink href=#pipeline-deployment title="Permanent link">&para;</a></h3> <p>There are multiple choices to deploy a Flink Statement:</p> <ol> <li> <p>During the Flink statement development activity, <code>confluent cli</code> may be used but <code>shift_left table init</code> command created an higher level of abstraction, using a Makefile within the table folder. This makefile directly use the <code>confluent cli</code>. <div class="language-sh highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a>make<span class=w> </span>create_flink_ddl
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>make<span class=w> </span>create_flink_dml
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a>make<span class=w> </span>drop_table_&lt;table_name&gt;
</span></code></pre></div></p> </li> <li> <p>Use the shift_left CLI to do a controlled deployment of a table. The tool uses the pipeline metadata to walk down the static relationship between Flink statements to build an execution plan and then deploy it. Data engineers should run the <a href=#assess-a-flink-statement-execution-plan><code>pipeline build-execution-plan</code></a> to assess the deep relationship between statements and understand the state of running Flink jobs.</p> </li> <li> <p>Deploy statements:</p> <ul> <li> <p>Deploy for one table without updating ancestors. It will start ancestors not just started. The deployment will take the full pipeline from the source to sink giving a sink table name. <div class="language-sh highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>deploy<span class=w> </span>--from-table<span class=w> </span>p1_fct_order
</span></code></pre></div></p> </li> <li> <p>Deploy for one table and restart its ancestors <div class="language-sh highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>deploy<span class=w> </span>--from-table<span class=w> </span>p1_fct_order<span class=w> </span>--force-ancestors
</span></code></pre></div></p> </li> <li>Deploy one table and its children <div class="language-sh highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>deploy<span class=w>  </span>--from-table<span class=w> </span>p1_fct_order<span class=w> </span>--may-start-descendants
</span></code></pre></div></li> <li>Which can be combined to start everything within the scope of a pipeline <div class="language-sh highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a>shift_left<span class=w>  </span>pipeline<span class=w> </span>deploy<span class=w> </span>--from-table<span class=w> </span>p1_fct_order<span class=w>  </span>--force-ancestors<span class=w> </span>--may-start-descendants
</span></code></pre></div></li> <li>Which can be combined to start everything within the scope of a pipeline, defaulting to the given compute-pool-id if not found: <div class="language-sh highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>deploy<span class=w> </span>--from-table<span class=w> </span>p1_fct_order<span class=w>  </span>--force-ancestors<span class=w> </span>--may-start-descendants<span class=w> </span>--compute-pool-id<span class=w> </span>lfcp-2...
</span></code></pre></div></li> <li>Deploy a set of tables within the same layer: <div class="language-sh highlight"><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>deploy<span class=w> </span>--dir<span class=w> </span><span class=nv>$PIPELINES</span>/sources/p2<span class=w> </span>--force-ancestors<span class=w> </span>--may-start-descendants
</span></code></pre></div></li> <li>Deploy a set of tables for a given product: <div class="language-sh highlight"><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>deploy<span class=w> </span>--product-name<span class=w> </span>p2<span class=w> </span>--force-ancestors<span class=w> </span>--may-start-descendants
</span></code></pre></div></li> </ul> </li> </ol> <h3 id=undeploy-pipeline>Undeploy pipeline<a class=headerlink href=#undeploy-pipeline title="Permanent link">&para;</a></h3> <p>It is possible to undeploy a pipeline from a given table:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>undeploy<span class=w> </span>--table-name<span class=w> </span>p1_fct_order
</span></code></pre></div> <p>Or at the product level:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a>shift_left<span class=w> </span>pipeline<span class=w> </span>undeploy<span class=w> </span>--product-name<span class=w> </span>p1
</span></code></pre></div> <h2 id=troubleshooting-the-cli>Troubleshooting the CLI<a class=headerlink href=#troubleshooting-the-cli title="Permanent link">&para;</a></h2> <p>When starting the CLI, it creates a logs folder under the $HOME/.shift_left/logs folder. The level of logging is specified in the <code>config.yaml</code> file in the app section:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=nt>app</span><span class=p>:</span>
</span><span id=__span-73-2><a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=w>  </span><span class=nt>logging</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">INFO</span>
</span></code></pre></div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../setup/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Environment Setup"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Environment Setup </div> </div> </a> <a href=../command/ class="md-footer__link md-footer__link--next" aria-label="Next: CLI References"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> CLI References </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 Jerome Boyer </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/jbcodeforce target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://linkedin.com/in/jeromeboyer target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href target=_blank rel=noopener title class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "content.tabs.link", "search.suggest", "search.highlight", "navigation.instant", "navigation.instant.progress", "navigation.tabs.sticky", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>