CREATE TABLE IF NOT EXISTS KPI_CONFIG_STREAM (
  kpiName STRING,
  kpiStatus STRING,
  networkService STRING,
  elementType STRING,
  nfCode STRING,
  dataCollector STRING,
  reportingEntityName STRING,
  DATABASE STRING,
  dbTable STRING,
  retentionPolicy STRING,
  tagSet STRING,
  numerator STRING,
  denominator STRING,
  `WHERE` STRING,
  thresholdId STRING,
  tcaStatus STRING,
  highWatermark INT,
  lowWatermark INT,
  direction STRING,
  alertDescription STRING,
  prodAlert STRING,
  alertType STRING,
  rubyService STRING,
  setMajorSuppressionPeriod INT,
  contCriticalSuppressionPeriod INT,
  contMajorSuppressionPeriod INT,
  clearSuppressionPeriod INT,
  processingType STRING,
  kpiId STRING,
  groupBy STRING,
  setCriticalSuppressionPeriod INT,
  outputTopic STRING,
  interfaceName STRING,
  sourceName STRING
) PRIMARY KEY(kpiId) NOT ENFORCED -- VERIFY KEY
DISTRIBUTED BY HASH(kpiId) INTO 6 BUCKETS WITH ( 
   'changelog.mode' = 'retract',
   'kafka.cleanup-policy'= 'compact',
   'key.avro-registry.schema-context' = '.flink-dev',
   'value.avro-registry.schema-context' = '.flink-dev',
   'key.format' = 'avro-debezium-registry',
   'value.format' = 'avro-debezium-registry',
   'kafka.retention.time' = '0',
   'kafka.producer.compression.type' = 'snappy',
   'scan.bounded.mode' = 'unbounded',
   'scan.startup.mode' = 'earliest-offset',
   'value.fields-include' = 'all'
)