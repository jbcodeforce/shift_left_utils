<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://jeromeboyer.net/shift_left_utils/coding/llm_based_translation/ rel=canonical><link href=../ rel=prev><link href=../../tracking/ rel=next><link rel=icon href=../../assets/batchy.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>AI based migration - Shift Left Utilities v0.1.48</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#sql-translation-code-review class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Shift Left Utilities v0.1.48" class="md-header__button md-logo" aria-label="Shift Left Utilities v0.1.48" data-md-component=logo> <img src=../../assets/batchy.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Shift Left Utilities v0.1.48 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> AI based migration </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/shift_left_utils title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Shift Left Utilities v0.1.48" class="md-nav__button md-logo" aria-label="Shift Left Utilities v0.1.48" data-md-component=logo> <img src=../../assets/batchy.png alt=logo> </a> Shift Left Utilities v0.1.48 </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/shift_left_utils title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../setup/ class=md-nav__link> <span class=md-ellipsis> Environment Setup </span> </a> </li> <li class=md-nav__item> <a href=../../recipes/ class=md-nav__link> <span class=md-ellipsis> Recipes </span> </a> </li> <li class=md-nav__item> <a href=../../command/ class=md-nav__link> <span class=md-ellipsis> CLI References </span> </a> </li> <li class=md-nav__item> <a href=../test_harness/ class=md-nav__link> <span class=md-ellipsis> Test Harness </span> </a> </li> <li class=md-nav__item> <a href=../../pipeline_mgr/ class=md-nav__link> <span class=md-ellipsis> Pipeline Management </span> </a> </li> <li class=md-nav__item> <a href=../../blue_green_deploy/ class=md-nav__link> <span class=md-ellipsis> Blue/Green Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../perf_test/ class=md-nav__link> <span class=md-ellipsis> Performance Testing </span> </a> </li> <li class=md-nav__item> <a href=../../mcp/ class=md-nav__link> <span class=md-ellipsis> MCP server </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/flink-studies/coding/flink-sql/ class=md-nav__link> <span class=md-ellipsis> Flink SQL best practices </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorial/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../tutorial/setup_lab/ class=md-nav__link> <span class=md-ellipsis> Setup Lab </span> </a> </li> <li class=md-nav__item> <a href=../../tutorial/project/ class=md-nav__link> <span class=md-ellipsis> Project Management Lab </span> </a> </li> <li class=md-nav__item> <a href=../../tutorial/migration_ai_lab/ class=md-nav__link> <span class=md-ellipsis> Migration AI Lab </span> </a> </li> <li class=md-nav__item> <a href=../../tutorial/de_lab/ class=md-nav__link> <span class=md-ellipsis> Date Engineer day to day work - Lab </span> </a> </li> <li class=md-nav__item> <a href=../../tutorial/sre_lab/ class=md-nav__link> <span class=md-ellipsis> SRE CI/CD process and other tasks - Lab </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> For Contributors </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> For Contributors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Code structure </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> AI based migration </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> AI based migration </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#review-the-end-user-lab class=md-nav__link> <span class=md-ellipsis> Review the end-user lab </span> </a> </li> <li class=md-nav__item> <a href=#current-agentic-approach class=md-nav__link> <span class=md-ellipsis> Current Agentic Approach </span> </a> </li> <li class=md-nav__item> <a href=#architecture-overview class=md-nav__link> <span class=md-ellipsis> Architecture Overview </span> </a> <nav class=md-nav aria-label="Architecture Overview"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#agent-roles class=md-nav__link> <span class=md-ellipsis> Agent Roles </span> </a> </li> <li class=md-nav__item> <a href=#class-diagram class=md-nav__link> <span class=md-ellipsis> Class diagram </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a-test-bed class=md-nav__link> <span class=md-ellipsis> A test bed </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites-and-setup-for-developers class=md-nav__link> <span class=md-ellipsis> Prerequisites and Setup for Developers </span> </a> </li> <li class=md-nav__item> <a href=#using-cursorai class=md-nav__link> <span class=md-ellipsis> Using Cursor.ai </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../tracking/ class=md-nav__link> <span class=md-ellipsis> Feature Tracking </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#review-the-end-user-lab class=md-nav__link> <span class=md-ellipsis> Review the end-user lab </span> </a> </li> <li class=md-nav__item> <a href=#current-agentic-approach class=md-nav__link> <span class=md-ellipsis> Current Agentic Approach </span> </a> </li> <li class=md-nav__item> <a href=#architecture-overview class=md-nav__link> <span class=md-ellipsis> Architecture Overview </span> </a> <nav class=md-nav aria-label="Architecture Overview"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#agent-roles class=md-nav__link> <span class=md-ellipsis> Agent Roles </span> </a> </li> <li class=md-nav__item> <a href=#class-diagram class=md-nav__link> <span class=md-ellipsis> Class diagram </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a-test-bed class=md-nav__link> <span class=md-ellipsis> A test bed </span> </a> </li> <li class=md-nav__item> <a href=#prerequisites-and-setup-for-developers class=md-nav__link> <span class=md-ellipsis> Prerequisites and Setup for Developers </span> </a> </li> <li class=md-nav__item> <a href=#using-cursorai class=md-nav__link> <span class=md-ellipsis> Using Cursor.ai </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=sql-translation-code-review>SQL Translation Code Review<a class=headerlink href=#sql-translation-code-review title="Permanent link">&para;</a></h1> <details class="- info"> <summary>Version</summary> <p>Created Dec - 2024 Updated Nov 25 - 2025</p> </details> <p>The current AI based migration implementation supported by this tool enables migration of:</p> <ul> <li>dbt/Spark SQL to Flink SQL</li> <li>ksqlDB to Flink SQL</li> </ul> <p>The approach uses LLM agents local or remote. This document covers the design approach, development environment setup, and how to execute test to tune the AI based SQL migrations, specially how to extend the AI prompts or workflows to get better results.</p> <p>The implementation uses the OpenAI SDK, so different LLM models can be used, as soon as they support OpenAI. The <code>qwen3:30b</code> or <code>qwen-coder-30b-a3b-instruct-mlx-4bit</code> models can be used locally using Osaurus on Mac M3 Pro with 36GB RAM., or Ollama on Linux VM. Other models running remotely and supporting OpenAI APIs may be used too using your own API key. </p> <h2 id=review-the-end-user-lab>Review the end-user lab<a class=headerlink href=#review-the-end-user-lab title="Permanent link">&para;</a></h2> <p>Review the <a href=../../tutorial/migration_ai_lab/ >end user lab for ksql migration</a> to understand the how the data engineer can use the tool for migration.</p> <details class="- info"> <summary>Example of Output</summary> <div class="language-sh highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>process<span class=w> </span>SQL<span class=w> </span>file<span class=w> </span>../src-dbt-project/models/facts/fct_examination_data.sql
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>Create<span class=w> </span>folder<span class=w> </span>fct_exam_data<span class=w> </span><span class=k>in</span><span class=w> </span>../flink-project/staging/facts/p1
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>---<span class=w> </span>Start<span class=w> </span>translator<span class=w> </span>AI<span class=w> </span>Agent<span class=w> </span>---
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>---<span class=w> </span>Done<span class=w> </span>translator<span class=w> </span>Agent:<span class=w> </span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>INSERT<span class=w> </span>INTO<span class=w> </span>fct_examination_data
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>...
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>---<span class=w> </span>Start<span class=w> </span>clean_sql<span class=w> </span>AI<span class=w> </span>Agent<span class=w> </span>---
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>---<span class=w> </span>Done<span class=w> </span>Clean<span class=w> </span>SQL<span class=w> </span>Agent:<span class=w> </span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>---<span class=w> </span>Start<span class=w> </span>ddl_generation<span class=w> </span>AI<span class=w> </span>Agent<span class=w> </span>---
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>---<span class=w> </span>Done<span class=w> </span>DDL<span class=w> </span>generator<span class=w> </span>Agent:
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>CREATE<span class=w> </span>TABLE<span class=w> </span>IF<span class=w> </span>NOT<span class=w> </span>EXISTS<span class=w> </span>fct_examination_data<span class=w> </span><span class=o>(</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>    </span><span class=sb>`</span>exam_id<span class=sb>`</span><span class=w> </span>STRING,
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=w>    </span><span class=sb>`</span>perf_id<span class=sb>`</span><span class=w> </span>STRING,
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>...
</span></code></pre></div> </details> <p>For a given table, the tool creates one folder with the table name, a Makefile to help manage the Flink statements with Confluent CLI, a <code>sql-scripts</code> folder for the Flink DDL and DML statements. </p> <p>Example of created folders:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>facts
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span>└──<span class=w> </span>fct_examination_data
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>        </span>├──<span class=w> </span>Makefile
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>        </span>├──<span class=w> </span>sql-scripts
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>        </span>│<span class=w>   </span>├──<span class=w> </span>ddl.fct_examination_data.sql
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>        </span>│<span class=w>   </span>└──<span class=w> </span>dml.fct_examination_data.sql
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>        </span>└──<span class=w> </span>tests
</span></code></pre></div> <p>As part of the process, developers need to validate the generated DDL and update the PRIMARY key to reflect the expected key. This information is hidden in many files in dbt, and key extraction is not yet automated by the migration tools.</p> <p><strong>Attention</strong>, the DML is not executable until all dependent input tables are created.</p> <ul> <li> <p>The ksqldb files to test, the migration from, are in <a href=https://github.com/jbcodeforce/shift_left_utils/tree/main/src/shift_left/tests/data/ksql-project/sources>src/shift_left/tests/data/ksql-project/sources</a></p> </li> <li> <p>Status of the working migration: See <strong>test_ksql_migration.py::TestKsqlMigrations</strong> code.</p> </li> </ul> <table> <thead> <tr> <th>Source</th> <th>Status</th> <th>Test Case</th> </tr> </thead> <tbody> <tr> <td>splitting_tutorial</td> <td>4 DDLs ✅ 4 DMLs ✅</td> <td>test_ksql_splitting_tutorial</td> </tr> <tr> <td>merge_tutorial</td> <td>3 DDLs ✅ 2 DMLs ✅</td> <td>test_ksql_merge_tutorial</td> </tr> </tbody> </table> <h2 id=current-agentic-approach>Current Agentic Approach<a class=headerlink href=#current-agentic-approach title="Permanent link">&para;</a></h2> <p>The current agentic workflow includes:</p> <ol> <li><strong>Translate</strong> the given SQL content to Flink SQL</li> <li><strong>Validate</strong> the syntax and semantics</li> <li><strong>Generate</strong> DDL derived from DML</li> <li><strong>Get human validation</strong> to continue or not the automation</li> <li><strong>Deploy</strong> and test with validation agents [optional]</li> </ol> <p>The system uses validation agents that execute syntactic validation and automatic deployment, with feedback loops injecting error messages back to translator agents when validation fails.</p> <h2 id=architecture-overview>Architecture Overview<a class=headerlink href=#architecture-overview title="Permanent link">&para;</a></h2> <p>The multi-agent system with human-in-the-loop validation may use Confluent Cloud's Flink REST API to deploy a generated Flink statement. The following diagram represents the different agents working together:</p> <figure> <img alt="AI Agent Flow" src=../images/ai_agent_new_flow.drawio.png> </figure> <p>Both agents support two validation modes:</p> <ol> <li><strong>Mandatory Validation</strong>: Always performed, checks syntax and best practices</li> <li><strong>Live Validation</strong>: Optional, validates against live Confluent Cloud for Apache Flink</li> </ol> <p>The validation process includes:</p> <ul> <li>Syntax checking</li> <li>Semantic validation</li> <li>Iterative refinement (up to 3 attempts)</li> <li>Human-in-the-loop confirmation for live validation</li> </ul> <p>When validation fails, agents use specialized refinement prompts to:</p> <ul> <li>Analyze the specific error message</li> <li>Consider validation history</li> <li>Generate corrected SQL that addresses the identified issues</li> <li>Provide explanations of changes made</li> </ul> <p>This creates a self-correcting translation pipeline that improves accuracy through iterative feedback.</p> <h3 id=agent-roles>Agent Roles<a class=headerlink href=#agent-roles title="Permanent link">&para;</a></h3> <p>As agent is a combination of LLM reference, prompts, and tool definitions, there will be different implementation of those agents if we do ksqlDB to Flink SQL or from Spark to Flink.</p> <h4 id=ksqldb-to-flink-agents>KsqlDB to Flink agents<a class=headerlink href=#ksqldb-to-flink-agents title="Permanent link">&para;</a></h4> <p>Supporting class of the workflow is <a href=https://github.com/jbcodeforce/shift_left_utils/blob/main/src/shift_left/shift_left/ai/ksql_code_agent.py>ksqlDB code agent</a>.</p> <p>Each agent uses specialized system prompts stored in external files:</p> <table> <thead> <tr> <th>Agent</th> <th>Scope</th> <th>Prompt File</th> </tr> </thead> <tbody> <tr> <td><strong>Translator</strong></td> <td>Raw KSQL to Flink SQL translation</td> <td><code>ai/prompts/ksql_fsql/translator.txt</code></td> </tr> <tr> <td><strong>Table Detection</strong></td> <td>Identify multiple CREATE statements</td> <td><code>ai/prompts/ksql_fsql/table_detection.txt</code></td> </tr> <tr> <td><strong>Validation</strong></td> <td>Validate Flink SQL constructs</td> <td><code>ai/prompts/ksql_fsql/mandatory_validation.txt</code></td> </tr> <tr> <td><strong>Refinement</strong></td> <td>Fix deployment errors</td> <td><code>ai/prompts/ksql_fsql/refinement.txt</code></td> </tr> </tbody> </table> <h4 id=code>Code<a class=headerlink href=#code title="Permanent link">&para;</a></h4> <p>The <code>src/shift_left/shift_left/ai</code> directory contains a suite of Large Language Model (LLM) agents designed to translate SQL from various dialects to Apache Flink SQL, with validation and iterative refinement capabilities.</p> <h4 id=spark-to-flink-agents>Spark to Flink agents<a class=headerlink href=#spark-to-flink-agents title="Permanent link">&para;</a></h4> <p>Supporting class of the workflow is <a href=https://github.com/jbcodeforce/shift_left_utils/blob/main/src/shift_left/shift_left/ai/spark_sql_code_agent.py>Spark sql code agent</a>.</p> <p>Same approach for spark SQL with the prompts being in the <code>ai/prompts/spark_fsql</code> folder. Each agent uses specialized system prompts stored in external files:</p> <table> <thead> <tr> <th>Agent</th> <th>Scope</th> <th>Prompt File</th> </tr> </thead> <tbody> <tr> <td><strong>Translator</strong></td> <td>Spark SQL to Flink SQL translation</td> <td><code>ai/prompts/spark_fsql/translator.txt</code></td> </tr> <tr> <td><strong>Table Detection</strong></td> <td>Identify multiple CREATE statements</td> <td><code>ai/prompts/spark_fsql/table_detection.txt</code></td> </tr> <tr> <td><strong>Validation</strong></td> <td>Validate Flink SQL constructs</td> <td><code>ai/prompts/spark_fsql/mandatory_validation.txt</code></td> </tr> <tr> <td><strong>Refinement</strong></td> <td>Fix deployment errors</td> <td><code>ai/prompts/spark_fsql/refinement.txt</code></td> </tr> </tbody> </table> <h3 id=class-diagram>Class diagram<a class=headerlink href=#class-diagram title="Permanent link">&para;</a></h3> <p>The translation system follows a modular, agent-based architecture with three main components:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>TranslatorToFlinkSqlAgent (Base Class)
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>├── SparkToFlinkSqlAgent (Spark SQL → Flink SQL)
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>└── KsqlToFlinkSqlAgent (KSQL → Flink SQL)
</span></code></pre></div> <p><img alt src=../images/ai_classes.drawio.png></p> <h4 id=translatortoflinksqlagent-translator_to_flink_sqlpy>TranslatorToFlinkSqlAgent (<code>translator_to_flink_sql.py</code>)<a class=headerlink href=#translatortoflinksqlagent-translator_to_flink_sqlpy title="Permanent link">&para;</a></h4> <p><strong>Purpose</strong>: Base abstract class that defines the common interface and shared functionality for all SQL translation agents.</p> <p><strong>Key Features</strong>:</p> <ul> <li><strong>LLM Configuration</strong>: Supports multiple models (Qwen, Mistral, Cogito) with configurable endpoints</li> <li><strong>Validation Pipeline</strong>: Integrates with Confluent Cloud for Apache Flink for live SQL validation</li> <li><strong>Factory Pattern</strong>: Provides <code>get_or_build_sql_translator_agent()</code> for dynamic agent instantiation</li> <li><strong>Error Handling</strong>: Base framework for iterative refinement when validation fails</li> </ul> <h4 id=sparktoflinksqlagent-spark_sql_code_agentpy>SparkToFlinkSqlAgent (<code>spark_sql_code_agent.py</code>)<a class=headerlink href=#sparktoflinksqlagent-spark_sql_code_agentpy title="Permanent link">&para;</a></h4> <p><strong>Purpose</strong>: Specialized agent for translating Spark SQL to Flink SQL with enhanced error categorization and refinement.</p> <p><strong>Translation Workflow</strong>:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>Spark SQL Input
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>    ↓
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>Translation Agent (Spark → Flink DML)
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>    ↓
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>DDL Generation Agent (DML → DDL)
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>    ↓
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>Pre-validation (Syntax Check)
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>    ↓
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>Confluent Cloud Validation
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>    ↓
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>Iterative Refinement (if errors)
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a>    ↓
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>Final Flink SQL (DDL + DML)
</span></code></pre></div> <p><strong>Key Features</strong>:</p> <ul> <li><strong>Structured Responses</strong>: Uses Pydantic models for consistent LLM output parsing</li> <li><strong>Error Categorization</strong>: Classifies errors into specific types (syntax, function incompatibility, type mismatch, etc.)</li> <li><strong>Multi-step Validation</strong>: Pre-validation + live validation with up to 3 refinement iterations</li> <li><strong>DDL Auto-generation</strong>: Automatically creates table definitions from query logic</li> <li><strong>Validation History</strong>: Tracks all validation attempts for debugging</li> </ul> <p><strong>Specialized Models</strong>: <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=k>class</span><span class=w> </span><span class=nc>SparkSqlFlinkDml</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>    <span class=n>flink_dml_output</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=k>class</span><span class=w> </span><span class=nc>SparkSqlFlinkDdl</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=n>flink_ddl_output</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=n>key_name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=k>class</span><span class=w> </span><span class=nc>SqlRefinement</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>    <span class=n>refined_ddl</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>    <span class=n>refined_dml</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>    <span class=n>explanation</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>    <span class=n>changes_made</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span></code></pre></div></p> <h4 id=ksqltoflinksqlagent-ksql_code_agentpy>KsqlToFlinkSqlAgent (<code>ksql_code_agent.py</code>)<a class=headerlink href=#ksqltoflinksqlagent-ksql_code_agentpy title="Permanent link">&para;</a></h4> <p><strong>Purpose</strong>: Specialized agent for translating KSQL (Kafka SQL) to Flink SQL with multi-table support and comprehensive preprocessing.</p> <p><strong>Translation Workflow</strong>: <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>KSQL Input
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>    ↓
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>1. Input Cleaning (Remove DROP statements, comments)
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>    ↓
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>2. Table Detection (Identify multiple CREATE statements)
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>    ↓
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>3. Individual Translation (Process each statement separately)
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>    ↓
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>4. Mandatory Validation (Syntax + best practices)
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>    ↓
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>5. Optional Live Validation (Confluent Cloud)
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>    ↓
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>Final Flink SQL Collections (DDL[] + DML[])
</span></code></pre></div></p> <p><strong>Key Features</strong>:</p> <ul> <li><strong>Multi-table Processing</strong>: Automatically detects and processes multiple CREATE TABLE/STREAM statements</li> <li><strong>Input Preprocessing</strong>: Removes problematic statements and comments that confuse LLMs</li> <li><strong>Batch Translation</strong>: Handles complex KSQL scripts with multiple related statements</li> <li><strong>Mandatory Validation</strong>: Always performs syntax and best practices validation</li> <li><strong>File Snapshots</strong>: Saves intermediate results for debugging and tracking</li> </ul> <p><strong>Specialized Models</strong>: <div class="language-python highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=k>class</span><span class=w> </span><span class=nc>KsqlFlinkSql</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>    <span class=n>ksql_input</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>    <span class=n>flink_ddl_output</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>    <span class=n>flink_dml_output</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=k>class</span><span class=w> </span><span class=nc>KsqlTableDetection</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>    <span class=n>has_multiple_tables</span><span class=p>:</span> <span class=nb>bool</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>    <span class=n>table_statements</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span>
</span></code></pre></div></p> <h2 id=a-test-bed>A test bed<a class=headerlink href=#a-test-bed title="Permanent link">&para;</a></h2> <p>The current project includes in the <code>tests/data/</code> folder some examples of Spark and ksql scripts.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>tests/data/ksql-project
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>├──<span class=w> </span>common.mk
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>├──<span class=w> </span>flink-references
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>├──<span class=w> </span>sources
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>│<span class=w>   </span>├──<span class=w> </span>aggregation.ksql
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>│<span class=w>   </span>├──<span class=w> </span>ddl-basic-table.ksql
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>│<span class=w>   </span>├──<span class=w> </span>ddl-bigger-file.ksql
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>│<span class=w>   </span>├──<span class=w> </span>ddl-filtering.ksql
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>│<span class=w>   </span>├──<span class=w> </span>ddl-g.ksql
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>│<span class=w>   </span>├──<span class=w> </span>ddl-geo.ksql
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>│<span class=w>   </span>├──<span class=w> </span>ddl-kpi-config-table.ksql
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>│<span class=w>   </span>├──<span class=w> </span>ddl-map_substr.ksql
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>│<span class=w>   </span>├──<span class=w> </span>ddl-measure_alert.ksql
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>│<span class=w>   </span>├──<span class=w> </span>dml-aggregate.ksql
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>│<span class=w>   </span>├──<span class=w> </span>filtering.ksql
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>│<span class=w>   </span>├──<span class=w> </span>geospacial.ksql
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>│<span class=w>   </span>├──<span class=w> </span>merge_tutorial.ksql
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>│<span class=w>   </span>├──<span class=w> </span>movements.ksql
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>│<span class=w>   </span>├──<span class=w> </span>splitter.ksql
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a>│<span class=w>   </span>├──<span class=w> </span>splitting_tutorial.ksql
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a>│<span class=w>   </span>└──<span class=w> </span>w2_processing.ksql
</span></code></pre></div> <p><code>flink-references</code> includes some migrated solutions used as reference for validating migrations.</p> <h2 id=prerequisites-and-setup-for-developers>Prerequisites and Setup for Developers<a class=headerlink href=#prerequisites-and-setup-for-developers title="Permanent link">&para;</a></h2> <p><a href=../../contributing/#environment-set-up-for-developers>See the environment setup for developers section.</a></p> <ul> <li>If using <code>uv</code> as python package manager (developers of the shift left tool), install it <a href=https://docs.astral.sh/uv/getting-started/installation/ >using the documentation</a>.</li> </ul> <h2 id=using-cursorai>Using Cursor.ai<a class=headerlink href=#using-cursorai title="Permanent link">&para;</a></h2> <p>If oyu have access to Cursor with <code>cloud-4.5-sonnet</code> model, a prompt like: <div class="language-sh highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>using<span class=w> </span>@src/shift_left/shift_left/ai/prompts/ksql_fsql/translator.txt<span class=w> </span>migrate<span class=w> </span>the<span class=w> </span>@src/shift_left/tests/data/ksql-project/sources/w2_processing.ksql<span class=w>  </span>file
</span></code></pre></div></p> <p>Will create a markdown file with the original ksql statements and the flink SQL matching statements at a higher speed than running qwen Ollama locally.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ class="md-footer__link md-footer__link--prev" aria-label="Previous: Code structure"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Code structure </div> </div> </a> <a href=../../tracking/ class="md-footer__link md-footer__link--next" aria-label="Next: Feature Tracking"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Feature Tracking </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024-2026 Jerome Boyer </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/jbcodeforce target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://linkedin.com/in/jeromeboyer target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href target=_blank rel=noopener title class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "content.tabs.link", "search.suggest", "search.highlight", "navigation.instant", "navigation.instant.progress", "navigation.tabs.sticky", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>